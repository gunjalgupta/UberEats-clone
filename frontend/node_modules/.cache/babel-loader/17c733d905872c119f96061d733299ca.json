{"ast":null,"code":"var _jsxFileName = \"/Users/gunjalgupta/Desktop/UberEats-clone/frontend/src/customer/Checkout.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Grid, TextField } from \"@material-ui/core\";\nimport axios from \"axios\";\nimport M from \"materialize-css\";\nimport { useHistory } from \"react-router-dom\";\nimport \"./UpdateProfile.css\";\nimport Radio from '@mui/material/Radio';\nimport RadioGroup from '@mui/material/RadioGroup';\nimport FormControlLabel from '@mui/material/FormControlLabel';\nimport FormControl from '@mui/material/FormControl';\nimport FormLabel from '@mui/material/FormLabel';\nimport { useDispatch } from \"react-redux\";\nimport { logout } from \"../actions/userActions\";\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Checkout = () => {\n  _s();\n\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const [headbg, setheadbg] = useState(\"transparent\");\n  const [shadow, setshadow] = useState(\"none\");\n  const [currentAddress, setCurrentAddress] = useState(\"\");\n  const [mode, setMode] = useState(\"pickup\");\n  const [savedAddress, setSavedAddress] = useState([]);\n  const [value, setValue] = useState(\"pickup\");\n  const [address, setAddress] = useState({\n    customerId: JSON.parse(localStorage.getItem(\"customer\")).customerId,\n    addline1: \"\",\n    addline2: \"\",\n    city: \"\",\n    state: \"\",\n    zipcode: \"\"\n  }); // const savedAddress = [\n  //   {\n  //     line1: \"1\",\n  //     line2: \"2\",\n  //     city: \"SJ\",\n  //     state: \"CA\",\n  //     zip: \"231\",\n  //   },\n  //   {\n  //     line1: \"3\",\n  //     line2: \"4\",\n  //     city: \"as\",\n  //     state: \"Aus\",\n  //     zip: \"q2\",\n  //   },\n  //   {\n  //     line1: \"6\",\n  //     line2: \"7\",\n  //     city: \"sf\",\n  //     state: \"sdf\",\n  //     zip: \"234\",\n  //   },\n  // ];\n\n  window.addEventListener(\"scroll\", () => {\n    if (window.scrollY >= 50) {\n      setheadbg(\"#FFFFFF\");\n      setshadow(\"rgb(226 226 226) 0px -2px 0px inset\");\n    } else {\n      setheadbg(\"transparent\");\n      setshadow(\"none\");\n    }\n  });\n\n  const submitOrder = () => {\n    console.log(\"here\", mode, currentAddress);\n\n    if (mode === 'delivery' && (currentAddress === null || currentAddress === \"\")) {\n      console.log(\"here\", mode, currentAddress);\n      toast.error(\"Address required\", {\n        position: \"top-right\",\n        autoClose: 5000,\n        hideProgressBar: true,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined\n      });\n    } else {\n      const order = JSON.parse(localStorage.getItem(\"order\"));\n      const restId = JSON.parse(localStorage.getItem(\"rescartid\"))[0];\n      axios.post(\"/api/order/addorder\", {\n        customerId: order.customerId,\n        restaurantId: restId.restaurantId,\n        invoiceId: order.invoiceId,\n        total: order.total,\n        mode: mode\n      }).then(response => {\n        //console.log(\"res\", response);\n        if (response.data.error) {\n          console.log(\"res\", response);\n          M.toast({\n            html: response.data.error,\n            classes: \"#c62828 red darken-3\"\n          });\n        } else {\n          //setcustomerData(response.data[0])\n          console.log(response.data);\n        }\n\n        const dishesToPass = [];\n        order.dishes.map(dish => {\n          console.log(order.invoiceId);\n          dishesToPass.push({\n            invoiceId: order.invoiceId,\n            dishId: dish.dishId,\n            quantity: dish.quantity,\n            price: dish.Price,\n            subtotal: dish.subtotal\n          });\n        });\n        console.log(\"-----------\", dishesToPass);\n        axios.post(\"/api/order/adddetails\", dishesToPass).then(res => {\n          console.log(res);\n        });\n      }).then(() => {\n        toast.success(\"Order placed successfully\", {\n          position: \"top-right\",\n          autoClose: 5000,\n          hideProgressBar: true,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined\n        });\n        localStorage.removeItem(\"cart\", null);\n        localStorage.removeItem(\"rescartid\", null);\n        localStorage.removeItem(\"order\", null);\n        const timeout = setTimeout(() => {\n          history.push(\"/chome\");\n        }, 3000); //history.push(\"/chome\")\n      });\n    }\n  };\n\n  const addAddress = () => {\n    console.log(address);\n    axios.post(\"/api/customer/addaddress/\", address).then(response => {\n      if (response.data.error) {\n        //console.log(\"res\",response);\n        M.toast({\n          html: response.data.error,\n          classes: \"#c62828 red darken-3\"\n        });\n      } else {\n        //setSavedAddress(response.data)\n        console.log(response.data);\n      }\n    });\n    setAddress({\n      addline1: \"\",\n      addline2: \"\",\n      city: \"\",\n      state: \"\",\n      zipcode: \"\"\n    });\n    setCurrentAddress(`${address.addline1}, ${address.addline2}, ${address.city}, ${address.state} - ${address.zipcode}`);\n  };\n\n  useEffect(() => {\n    const customerId = JSON.parse(localStorage.getItem(\"customer\")).customerId;\n    axios.post(`/api/customer/fetchaddress/${customerId}`, {}).then(response => {\n      if (response.data.error) {\n        console.log(\"res\", response);\n        M.toast({\n          html: response.data.error,\n          classes: \"#c62828 red darken-3\"\n        });\n      } else {\n        setSavedAddress(response.data);\n        console.log(response.data[0]);\n      }\n    });\n  }, []);\n\n  function signout() {\n    dispatch(logout());\n    localStorage.setItem(\"customer\", null);\n    history.push(\"/\");\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"section\",\n    id: \"about\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"update\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header__upper\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"header__upperheader\",\n          style: {\n            backgroundColor: headbg,\n            boxShadow: shadow\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"header__upperheaderleft\",\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/chome\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: \"https://d3i4yxtzktqr9n.cloudfront.net/web-eats-v2/ee037401cb5d31b23cf780808ee4ec1f.svg \",\n                alt: \"uber eats\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 17\n              }, this), \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"header__upperheaderright\",\n            onClick: signout,\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \" Sign out \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      style: {\n        paddingTop: \"100px\",\n        height: \"100vh\"\n      },\n      container: true,\n      direction: \"row\",\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        container: true // spacing={3}\n        ,\n        xs: 6,\n        style: {\n          // border: \"1px solid grey\",\n          height: \"100%\",\n          margin: 10\n        },\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          xs: 12,\n          style: {\n            display: 'flex',\n            justifyContent: 'center',\n            paddingTop: \"0px\",\n            fontSize: 32\n          },\n          children: JSON.parse(localStorage.getItem(\"cart\"))[0].rname\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          style: {\n            width: \"100%\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Dish Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Quantity\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Subtotal\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 11\n          }, this), localStorage.getItem(\"cart\") && JSON.parse(localStorage.getItem(\"cart\")).map(dish => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: dish.dname\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: dish.quantity\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: dish.subtotal\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          item: true,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            xs: 4\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            xs: 4,\n            children: \"Total Price\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            xs: 4,\n            children: JSON.parse(localStorage.getItem(\"order\")).total\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 11\n        }, this), \"Mode of delivery:\", /*#__PURE__*/_jsxDEV(FormControl, {\n          component: \"fieldset\",\n          children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n            component: \"legend\",\n            children: \"Choose an option\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(RadioGroup, {\n            \"aria-label\": \"gender\",\n            value: value,\n            name: \"radio-buttons-group\",\n            onChange: e => {\n              setMode(e.target.value);\n              setValue(e.target.value);\n            },\n            children: [/*#__PURE__*/_jsxDEV(FormControlLabel, {\n              value: \"pickup\",\n              defaultChecked: \"true\",\n              control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 81\n              }, this),\n              label: \"Pick-up\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n              value: \"delivery\",\n              control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 287,\n                columnNumber: 61\n              }, this),\n              label: \"Delivery\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {\n          position: \"top-right\",\n          autoClose: 5000,\n          hideProgressBar: true,\n          newestOnTop: false,\n          closeOnClick: true,\n          rtl: false,\n          pauseOnFocusLoss: true,\n          draggable: true,\n          pauseOnHover: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {\n          position: \"top-right\",\n          autoClose: 5000,\n          hideProgressBar: true,\n          newestOnTop: false,\n          closeOnClick: true,\n          rtl: false,\n          pauseOnFocusLoss: true,\n          draggable: true,\n          pauseOnHover: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 1\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 3,\n        xs: 6,\n        style: {\n          border: \"1px solid grey\",\n          height: \"100%\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          item: true,\n          direction: \"column\",\n          style: {\n            padding: \"20px\"\n          },\n          children: [\"Address:\", /*#__PURE__*/_jsxDEV(TextField, {\n            label: \"Address Line 1\",\n            value: address.addline1,\n            onChange: e => setAddress({ ...address,\n              addline1: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            label: \"Address Line 2\",\n            value: address.addline2,\n            onChange: e => setAddress({ ...address,\n              addline2: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            label: \"City\",\n            value: address.city,\n            onChange: e => setAddress({ ...address,\n              city: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            label: \"State\",\n            value: address.state,\n            onChange: e => setAddress({ ...address,\n              state: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            label: \"Zip Code\",\n            value: address.zipcode,\n            onChange: e => setAddress({ ...address,\n              zipcode: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: addAddress,\n            style: {\n              width: \"fill-content\"\n            },\n            children: \"Add address\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          item: true,\n          direction: \"column\",\n          style: {\n            padding: \"40px 20px\"\n          },\n          children: [\"Saved Address:\", /*#__PURE__*/_jsxDEV(FormControl, {\n            component: \"fieldset\",\n            children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n              component: \"legend\",\n              children: \"Choose from existing address\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(RadioGroup, {\n              \"aria-label\": \"gender\",\n              defaultValue: \"female\",\n              name: \"radio-buttons-group\",\n              onChange: e => setCurrentAddress(e.target.value),\n              children: savedAddress.map(address => /*#__PURE__*/_jsxDEV(FormControlLabel, {\n                value: `${address.addline1}, ${address.addline2}, ${address.city}, ${address.state} - ${address.zipcode}`,\n                control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 393,\n                  columnNumber: 28\n                }, this),\n                label: `${address.addline1}, ${address.addline2}, ${address.city}, ${address.state} - ${address.zipcode}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 391,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          item: true,\n          direction: \"column\",\n          style: {\n            padding: \"40px 20px\"\n          },\n          children: [\"Selected Address : \", currentAddress]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          item: true,\n          style: {\n            height: \"fit-content\",\n            display: \"flex\",\n            justifyContent: \"center\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              color: 'white',\n              backgroundColor: 'black',\n              paddingLeft: 50,\n              paddingRight: 50,\n              fontSize: 20\n            },\n            onClick: submitOrder,\n            children: \"Place Order\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 420,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 411,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 198,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Checkout, \"+oqLcCVbS40Qs4wpaIgEVTyNeXQ=\", false, function () {\n  return [useHistory, useDispatch];\n});\n\n_c = Checkout;\nexport default Checkout;\n\nvar _c;\n\n$RefreshReg$(_c, \"Checkout\");","map":{"version":3,"sources":["/Users/gunjalgupta/Desktop/UberEats-clone/frontend/src/customer/Checkout.js"],"names":["React","useState","useEffect","Link","Grid","TextField","axios","M","useHistory","Radio","RadioGroup","FormControlLabel","FormControl","FormLabel","useDispatch","logout","ToastContainer","toast","Checkout","history","dispatch","headbg","setheadbg","shadow","setshadow","currentAddress","setCurrentAddress","mode","setMode","savedAddress","setSavedAddress","value","setValue","address","setAddress","customerId","JSON","parse","localStorage","getItem","addline1","addline2","city","state","zipcode","window","addEventListener","scrollY","submitOrder","console","log","error","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","order","restId","post","restaurantId","invoiceId","total","then","response","data","html","classes","dishesToPass","dishes","map","dish","push","dishId","quantity","price","Price","subtotal","res","success","removeItem","timeout","setTimeout","addAddress","signout","setItem","backgroundColor","boxShadow","paddingTop","height","margin","display","justifyContent","fontSize","rname","width","dname","e","target","border","padding","color","paddingLeft","paddingRight"],"mappings":"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","sourcesContent":["import React, { useState, useEffect} from \"react\";\n\nimport { Link } from \"react-router-dom\";\nimport { Grid, TextField } from \"@material-ui/core\";\nimport axios from \"axios\";\nimport M from \"materialize-css\";\nimport { useHistory } from \"react-router-dom\";\nimport \"./UpdateProfile.css\";\nimport Radio from '@mui/material/Radio';\nimport RadioGroup from '@mui/material/RadioGroup';\nimport FormControlLabel from '@mui/material/FormControlLabel';\nimport FormControl from '@mui/material/FormControl';\nimport FormLabel from '@mui/material/FormLabel';\nimport { useDispatch } from \"react-redux\";\nimport { logout } from \"../actions/userActions\";\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nconst Checkout = () => {\n  const history= useHistory();\n  const dispatch= useDispatch();\n  const [headbg, setheadbg] = useState(\"transparent\");\n  const [shadow, setshadow] = useState(\"none\");\n  const [currentAddress, setCurrentAddress] = useState(\"\")\n  const [mode, setMode] = useState(\"pickup\")\n  const [savedAddress, setSavedAddress]= useState([]);\n  const [value, setValue] = useState(\"pickup\");\n  const [address, setAddress] = useState({\n    customerId: JSON.parse(localStorage.getItem(\"customer\")).customerId,\n    addline1: \"\",\n    addline2: \"\",\n    city: \"\",\n    state: \"\",\n    zipcode: \"\",\n  });\n\n  // const savedAddress = [\n  //   {\n  //     line1: \"1\",\n  //     line2: \"2\",\n  //     city: \"SJ\",\n  //     state: \"CA\",\n  //     zip: \"231\",\n  //   },\n  //   {\n  //     line1: \"3\",\n  //     line2: \"4\",\n  //     city: \"as\",\n  //     state: \"Aus\",\n  //     zip: \"q2\",\n  //   },\n  //   {\n  //     line1: \"6\",\n  //     line2: \"7\",\n  //     city: \"sf\",\n  //     state: \"sdf\",\n  //     zip: \"234\",\n  //   },\n  // ];\n\n  window.addEventListener(\"scroll\", () => {\n    if (window.scrollY >= 50) {\n      setheadbg(\"#FFFFFF\");\n      setshadow(\"rgb(226 226 226) 0px -2px 0px inset\");\n    } else {\n      setheadbg(\"transparent\");\n      setshadow(\"none\");\n    }\n  });\n\n  const submitOrder = () => {\n    console.log(\"here\",mode,currentAddress)\n    if(mode==='delivery' && (currentAddress===null || currentAddress===\"\")){\n    console.log(\"here\",mode,currentAddress)\n    \n    toast.error(\"Address required\", {\n      position: \"top-right\",\n      autoClose: 5000,\n      hideProgressBar: true,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true,\n      progress: undefined,\n      });\n      \n  } \n    \n    else{\n    const order = JSON.parse(localStorage.getItem(\"order\"));\n    const restId = JSON.parse(localStorage.getItem(\"rescartid\"))[0];\n    axios\n      .post(\"/api/order/addorder\", {\n        customerId: order.customerId,\n        restaurantId: restId.restaurantId,\n        invoiceId: order.invoiceId,\n        total: order.total,\n        mode: mode\n      })\n      .then((response) => {\n        //console.log(\"res\", response);\n        if (response.data.error) {\n          console.log(\"res\", response);\n          M.toast({\n            html: response.data.error,\n            classes: \"#c62828 red darken-3\",\n          });\n        } else {\n          //setcustomerData(response.data[0])\n          console.log(response.data);\n         \n        }\n        const dishesToPass = [];\n        order.dishes.map((dish) => {\n          console.log(order.invoiceId);\n          dishesToPass.push({\n            invoiceId: order.invoiceId,\n            dishId: dish.dishId,\n            quantity: dish.quantity,\n            price: dish.Price,\n            subtotal: dish.subtotal\n          });\n        });\n        console.log(\"-----------\",dishesToPass);\n        axios.post(\"/api/order/adddetails\", dishesToPass).then((res)=>{\n          console.log(res)\n        })\n      }).then(()=>{\n        \n       \n        toast.success(\"Order placed successfully\", {\n          position: \"top-right\",\n          autoClose: 5000,\n          hideProgressBar: true,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined,\n          });\n        localStorage.removeItem(\"cart\",null);\n        localStorage.removeItem(\"rescartid\",null);\n        localStorage.removeItem(\"order\",null);\n        const timeout = setTimeout(() => {\n          history.push(\"/chome\");\n        }, 3000);\n        //history.push(\"/chome\")\n      })\n  }};\n\n  const addAddress = () => {\n    console.log(address);\n\n    axios.post(\"/api/customer/addaddress/\",address)\n    .then(response => {\n        \n        if (response.data.error) {\n            //console.log(\"res\",response);\n            M.toast({ html: response.data.error, classes: \"#c62828 red darken-3\" })\n        }\n        else {\n                //setSavedAddress(response.data)\n                console.log(response.data)\n        }\n    })\n\n    setAddress({\n      addline1: \"\",\n      addline2: \"\",\n      city: \"\",\n      state: \"\",\n      zipcode: \"\",\n    });\n    setCurrentAddress(`${address.addline1}, ${address.addline2}, ${address.city}, ${address.state} - ${address.zipcode}`)\n  };\n\n  useEffect(() => {\n    const customerId =  JSON.parse(localStorage.getItem(\"customer\")).customerId;\n    axios.post(`/api/customer/fetchaddress/${customerId}`,{})\n    .then(response => {\n        \n        if (response.data.error) {\n            console.log(\"res\",response);\n            M.toast({ html: response.data.error, classes: \"#c62828 red darken-3\" })\n        }\n        else {\n                setSavedAddress(response.data)\n                console.log(response.data[0])\n        }\n    })\n  },[]);\n\n  function signout(){\n    dispatch(logout());\n    localStorage.setItem(\"customer\",null);\n    history.push(\"/\")\n  }\n\n  return (\n    <section className=\"section\" id=\"about\">\n      <div className=\"update\">\n        <div className=\"header__upper\">\n          <div\n            className=\"header__upperheader\"\n            style={{ backgroundColor: headbg, boxShadow: shadow }}\n          >\n            <div className=\"header__upperheaderleft\">\n              <Link to=\"/chome\">\n                <img\n                  src=\"https://d3i4yxtzktqr9n.cloudfront.net/web-eats-v2/ee037401cb5d31b23cf780808ee4ec1f.svg \"\n                  alt=\"uber eats\"\n                />{\" \"}\n              </Link>\n            </div>\n\n            {/* <div className=\"header__upperheadercenter\"   >\n \n    <input type=\"text\" placeholder=\"What are you craving? \" />\n </div> */}\n\n            <div className=\"header__upperheaderright\" onClick={signout}>\n              <p> Sign out </p>\n            </div>\n          </div>\n        </div>\n      </div>\n      <Grid\n        style={{\n          paddingTop: \"100px\",\n          height: \"100vh\",\n        }}\n        container\n        direction={\"row\"}\n      >\n        <Grid\n          container\n          // spacing={3}\n          xs={6}\n          style={{\n            // border: \"1px solid grey\",\n            height: \"100%\",\n            margin: 10\n           \n          }}\n        >\n          <Grid container xs={12} style={{display:'flex', justifyContent:'center',  paddingTop: \"0px\",fontSize:32}}>\n          {JSON.parse(localStorage.getItem(\"cart\"))[0].rname}\n                </Grid>\n          <table\n            style={{\n            width: \"100%\",\n          }}\n          >\n          <tr>\n            <th>Dish Name</th>\n            <th>Quantity</th>\n            <th>Subtotal</th>\n          </tr> \n          {localStorage.getItem(\"cart\") &&\n            JSON.parse(localStorage.getItem(\"cart\")).map((dish) => (\n              <tr>\n                <td>{dish.dname}</td>\n                <td>{dish.quantity}</td>\n                <td>{dish.subtotal}</td>\n              </tr>\n            ))}\n            </table>\n          <Grid container item>\n            <Grid container xs={4}></Grid>\n            <Grid container xs={4}>\n              Total Price\n            </Grid>\n            <Grid container xs={4}>\n              {JSON.parse(localStorage.getItem(\"order\")).total}\n            </Grid>\n          </Grid>\n        \n            Mode of delivery:\n            <FormControl component=\"fieldset\">\n              <FormLabel component=\"legend\">Choose an option</FormLabel>\n              <RadioGroup\n                aria-label=\"gender\"\n                value= {value}\n                name=\"radio-buttons-group\"\n                onChange={(e) => {setMode(e.target.value)\n                setValue(e.target.value)}}\n              >    \n                <FormControlLabel value=\"pickup\" defaultChecked=\"true\" control={<Radio />} label=\"Pick-up\" />\n                <FormControlLabel value=\"delivery\" control={<Radio />} label=\"Delivery\" />\n              </RadioGroup>\n            </FormControl>\n            <ToastContainer\nposition=\"top-right\"\nautoClose={5000}\nhideProgressBar\nnewestOnTop={false}\ncloseOnClick\nrtl={false}\npauseOnFocusLoss\ndraggable\npauseOnHover\n/>\n<ToastContainer\nposition=\"top-right\"\nautoClose={5000}\nhideProgressBar\nnewestOnTop={false}\ncloseOnClick\nrtl={false}\npauseOnFocusLoss\ndraggable\npauseOnHover\n/>\n          </Grid>\n        <Grid\n          container\n          spacing={3}\n          xs={6}\n          style={{\n            border: \"1px solid grey\",\n            height: \"100%\",\n          }}\n        >\n          <Grid\n            container\n            item\n            direction=\"column\"\n            style={{\n              padding: \"20px\",\n            }}\n          >\n            Address:\n            <TextField\n              label=\"Address Line 1\"\n              value={address.addline1}\n              onChange={(e) =>\n                setAddress({ ...address, addline1: e.target.value })\n              }\n            />\n            <TextField\n              label=\"Address Line 2\"\n              value={address.addline2}\n              onChange={(e) =>\n                setAddress({ ...address, addline2: e.target.value })\n              }\n            />\n            <TextField\n              label=\"City\"\n              value={address.city}\n              onChange={(e) => setAddress({ ...address, city: e.target.value })}\n            />\n            <TextField\n              label=\"State\"\n              value={address.state}\n              onChange={(e) =>\n                setAddress({ ...address, state: e.target.value })\n              }\n            />\n            <TextField\n              label=\"Zip Code\"\n              value={address.zipcode}\n              onChange={(e) => setAddress({ ...address, zipcode: e.target.value })}\n            />\n            <br />\n            <button\n              onClick={addAddress}\n              style={{\n                width: \"fill-content\",\n              }}\n            >\n              Add address\n            </button>\n          </Grid>\n\n          <Grid\n            container\n            item\n            direction=\"column\"\n            style={{\n              padding: \"40px 20px\",\n            }}\n          >\n            Saved Address:\n            <FormControl component=\"fieldset\">\n              <FormLabel component=\"legend\">Choose from existing address</FormLabel>\n              <RadioGroup\n                aria-label=\"gender\"\n                defaultValue=\"female\"\n                name=\"radio-buttons-group\"\n                onChange={(e) => setCurrentAddress(e.target.value)}\n              >\n                  {savedAddress.map((address) => \n                  <FormControlLabel\n                  value={`${address.addline1}, ${address.addline2}, ${address.city}, ${address.state} - ${address.zipcode}`}\n                  control={<Radio />}\n                  label={`${address.addline1}, ${address.addline2}, ${address.city}, ${address.state} - ${address.zipcode}`}\n                />)}\n              </RadioGroup>\n            </FormControl>\n          </Grid>\n\n          <Grid\n            container\n            item\n            direction=\"column\"\n            style={{\n              padding: \"40px 20px\",\n            }}\n          >\n              Selected Address : {currentAddress}\n          </Grid>\n\n          <Grid\n            container\n            item\n            style={{\n              height: \"fit-content\",\n              display: \"flex\",\n              justifyContent: \"center\",\n            }}\n          >\n            <button style={{color:'white', backgroundColor:'black',paddingLeft:50,paddingRight:50, fontSize:20}}onClick={submitOrder}>Place Order</button>\n          </Grid>\n        </Grid>\n      </Grid>\n    </section>\n  );\n};\nexport default Checkout;\n"]},"metadata":{},"sourceType":"module"}