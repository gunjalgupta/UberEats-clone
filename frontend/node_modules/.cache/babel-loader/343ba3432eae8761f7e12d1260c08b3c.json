{"ast":null,"code":"import _objectSpread from\"/Users/gunjalgupta/Desktop/ubereatss/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/gunjalgupta/Desktop/ubereatss/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from\"react\";import{Link}from\"react-router-dom\";import{Grid,TextField}from\"@material-ui/core\";import axios from\"axios\";import M from\"materialize-css\";import{Button}from\"react-bootstrap\";import{BrowserRouter as Router,useHistory}from\"react-router-dom\";import\"./UpdateProfile.css\";import FormControlLabel from\"@mui/material/FormControlLabel\";import FormControl from\"@mui/material/FormControl\";import FormLabel from\"@mui/material/FormLabel\";import Box from\"@mui/material/Box\";import InputLabel from\"@mui/material/InputLabel\";import MenuItem from\"@mui/material/MenuItem\";import Select from\"@mui/material/Select\";import'./Pastorders.css';import{Typography}from\"@material-ui/core\";import ReactDOM from\"react-dom\";import{useDispatch}from\"react-redux\";import{logout}from\"../actions/userActions\";import FormGroup from'@mui/material/FormGroup';import Checkbox from'@mui/material/Checkbox';import{LocationOn}from\"@mui/icons-material\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Pastorders=function Pastorders(){var history=useHistory();var dispatch=useDispatch();var _useState=useState(\"transparent\"),_useState2=_slicedToArray(_useState,2),headbg=_useState2[0],setheadbg=_useState2[1];var _useState3=useState(\"none\"),_useState4=_slicedToArray(_useState3,2),shadow=_useState4[0],setshadow=_useState4[1];var _useState5=useState(\"pickup\"),_useState6=_slicedToArray(_useState5,2),mode=_useState6[0],setMode=_useState6[1];// const [pickup, setPickup] = useState()\n// const [delivery, setDelivery] = useState()\nvar _useState7=useState([{restaurantName:\"restaurantName\",date:\"date\",total:\"total\"}]),_useState8=_slicedToArray(_useState7,2),orders=_useState8[0],setOrders=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),orderdetails=_useState10[0],setOrderdetails=_useState10[1];var _useState11=useState(orders),_useState12=_slicedToArray(_useState11,2),filteredOrders=_useState12[0],setFilteredOrders=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),filters=_useState14[0],setFilters=_useState14[1];var _useState15=useState({delivery:true,pickup:true}),_useState16=_slicedToArray(_useState15,2),pd=_useState16[0],updatePD=_useState16[1];useEffect(function(){axios.post(\"http://localhost:8081/order/getcusorder\",{customerId:JSON.parse(localStorage.getItem(\"customer\")).customerId}).then(function(res){console.log(res);setOrders(res.data);});},[]);var getdetails=function getdetails(invoiceId){axios.post(\"http://localhost:8081/order/getcusdetail\",{customerId:JSON.parse(localStorage.getItem(\"customer\")).customerId,invoiceId:invoiceId}).then(function(res){console.log(res);setOrderdetails(res.data);});};window.addEventListener(\"scroll\",function(){if(window.scrollY>=50){setheadbg(\"#FFFFFF\");setshadow(\"rgb(226 226 226) 0px -2px 0px inset\");}else{setheadbg(\"transparent\");setshadow(\"none\");}});var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),status=_useState18[0],setStatus=_useState18[1];useEffect(function(){if(pd.pickup===true&&pd.delivery===false){console.log(\"pi\");setFilters([\"Order received\",\"Preparing\",\" Pickup Ready\",\"Picked up\"]);console.log(filters);}else if(pd.delivery===true&&pd.pickup===false){console.log(\"de\");setFilters([\"Order received\",\"Preparing\",\"On the way\",\"Delivered\"]);}else{setFilters([\"All orders\",\"Order received\",\"Preparing\",\"On the way\",\"Delivered\",\" Pickup Ready\",\"Picked up\"]);}console.log(pd);},[pd]);// const filters = [\"All orders\",\"Order received\", \"Preparing\", \"On the way\", \"Delivered\", \" Pickup Ready\", \"Picked up\"]\n// [\"Order Received\", \"Preparing\", \"On the way\", \"Delivered\"]\n// [\"Order Received\", \"Preparing\", \" Pick up Ready\", \"Picked Up\"];\nvar handleChange=function handleChange(event){setStatus(event.target.value);};useEffect(function(){if(status==\"All orders\"){setFilteredOrders(orders);}else setFilteredOrders(orders.filter(function(order){return order.ostatus===status;}));},[status]);useEffect(function(){return setFilteredOrders(orders);},[orders]);var useModal=function useModal(){var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),isShowing=_useState20[0],setIsShowing=_useState20[1];function toggle(){setIsShowing(!isShowing);}return{isShowing:isShowing,toggle:toggle};};var Modal=function Modal(_ref){var isShowing=_ref.isShowing,hide=_ref.hide,total=_ref.total;return isShowing?/*#__PURE__*/ReactDOM.createPortal(/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\"}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-wrapper\",\"aria-modal\":true,\"aria-hidden\":true,tabIndex:-1,role:\"dialog\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-header\",style:{justifyContent:'flex-end'},children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"modal-close-button\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\",onClick:hide,children:/*#__PURE__*/_jsx(\"span\",{\"aria-hidden\":\"true\",children:\"\\xD7\"})})}),/*#__PURE__*/_jsx(Typography,{component:\"div\",variant:\"h5\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle1\",color:\"text.secondary\",component:\"div\",children:[/*#__PURE__*/_jsx(\"br\",{}),\"Order details\"]}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[orderdetails.map(function(dish){return/*#__PURE__*/_jsxs(Grid,{container:true,item:true,children:[/*#__PURE__*/_jsx(Grid,{container:true,xs:4,children:dish.dname}),/*#__PURE__*/_jsx(Grid,{container:true,xs:4,children:dish.quantity}),/*#__PURE__*/_jsx(Grid,{container:true,xs:4,children:dish.subtotal})]});}),/*#__PURE__*/_jsxs(Grid,{container:true,item:true,children:[/*#__PURE__*/_jsx(Grid,{container:true,xs:4}),/*#__PURE__*/_jsx(Grid,{container:true,xs:4,children:\"Total Price :\"}),/*#__PURE__*/_jsx(Grid,{container:true,xs:4,children:total})]})]}),/*#__PURE__*/_jsx(Box,{sx:{display:\"flex\",alignItems:\"center\",pl:1,pb:1}})]})})]}),document.body):null;};var _useModal=useModal(),isShowing=_useModal.isShowing,toggle=_useModal.toggle;function signout(){dispatch(logout());localStorage.setItem(\"customer\",null);history.push(\"/\");}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"header__upper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header__upperheader\",style:{backgroundColor:headbg,boxShadow:shadow},children:[/*#__PURE__*/_jsx(\"div\",{className:\"header__upperheaderleft\",children:/*#__PURE__*/_jsxs(Link,{to:\"/chome\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://d3i4yxtzktqr9n.cloudfront.net/web-eats-v2/ee037401cb5d31b23cf780808ee4ec1f.svg \",alt:\"uber eats\"}),\" \"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"header__upperheadercenter\",children:[/*#__PURE__*/_jsx(LocationOn,{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"What are you craving? \"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"header__upperheaderright\",onClick:signout,children:/*#__PURE__*/_jsx(\"p\",{children:\" Sign out \"})})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{paddingTop:\"100px\",height:\"100vh\",paddingLeft:'45px',paddingRight:'45px'},container:true,direction:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{style:{paddingBottom:'30px'},children:/*#__PURE__*/_jsx(\"h1\",{children:\"Past Orders\"})}),/*#__PURE__*/_jsxs(Box,{sx:{minWidth:120},style:{color:\"black\",paddingBottom:'30px'},children:[/*#__PURE__*/_jsxs(FormGroup,{style:{display:\"flex\"},children:[/*#__PURE__*/_jsx(FormControlLabel,{value:\"pickup\",onChange:function onChange(event){return updatePD(_objectSpread(_objectSpread({},pd),{},{pickup:event.target.checked}));},control:/*#__PURE__*/_jsx(Checkbox,{defaultChecked:\"true\",style:{color:\"black\"}}),label:\"Pick-up\"}),/*#__PURE__*/_jsx(FormControlLabel,{value:\"delivery\",onChange:function onChange(event){return updatePD(_objectSpread(_objectSpread({},pd),{},{delivery:event.target.checked}));},control:/*#__PURE__*/_jsx(Checkbox,{defaultChecked:\"true\",style:{color:\"black\"}}),label:\"Delivery\"})]}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,style:{color:\"black\"},children:[/*#__PURE__*/_jsx(InputLabel,{id:\"demo-simple-select-label\",children:\"Order status\"}),/*#__PURE__*/_jsx(Select,{labelId:\"demo-simple-select-label\",id:\"demo-simple-select\",value:status,label:\"Status\",onChange:handleChange,style:{color:\"black\"},children:filters.map(function(filter){return/*#__PURE__*/_jsx(MenuItem,{value:filter,children:filter});})})]})]}),/*#__PURE__*/_jsxs(\"table\",{style:{width:\"100%\",paddingTop:'30px'},children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Restaurant Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Order Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Amount\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Mode of delivery\"})]}),filteredOrders.map(function(order){return/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(){toggle();getdetails(order.invoiceId);},children:[/*#__PURE__*/_jsx(\"td\",{children:order.rname}),/*#__PURE__*/_jsx(\"td\",{children:order.orderDate}),/*#__PURE__*/_jsx(\"td\",{children:order.total}),/*#__PURE__*/_jsx(\"td\",{children:order.mode}),/*#__PURE__*/_jsx(Modal,{isShowing:isShowing,hide:toggle,total:order.total,style:{position:\"absolute\",width:\"240px\",height:\"340px\"}})]});})]})]})]});};export default Pastorders;","map":{"version":3,"sources":["/Users/gunjalgupta/Desktop/ubereatss/frontend/src/customer/Pastorders.js"],"names":["React","useState","useEffect","useContext","Link","Grid","TextField","axios","M","Button","BrowserRouter","Router","useHistory","FormControlLabel","FormControl","FormLabel","Box","InputLabel","MenuItem","Select","Typography","ReactDOM","useDispatch","logout","FormGroup","Checkbox","LocationOn","Pastorders","history","dispatch","headbg","setheadbg","shadow","setshadow","mode","setMode","restaurantName","date","total","orders","setOrders","orderdetails","setOrderdetails","filteredOrders","setFilteredOrders","filters","setFilters","delivery","pickup","pd","updatePD","post","customerId","JSON","parse","localStorage","getItem","then","res","console","log","data","getdetails","invoiceId","window","addEventListener","scrollY","status","setStatus","handleChange","event","target","value","filter","order","ostatus","useModal","isShowing","setIsShowing","toggle","Modal","hide","createPortal","justifyContent","map","dish","dname","quantity","subtotal","display","alignItems","pl","pb","document","body","signout","setItem","push","backgroundColor","boxShadow","paddingTop","height","paddingLeft","paddingRight","paddingBottom","minWidth","color","checked","width","rname","orderDate","position"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\n\nimport { Link } from \"react-router-dom\";\nimport { Grid, TextField } from \"@material-ui/core\";\nimport axios from \"axios\";\nimport M from \"materialize-css\";\nimport { Button } from \"react-bootstrap\";\nimport { BrowserRouter as Router, useHistory } from \"react-router-dom\";\nimport \"./UpdateProfile.css\";\nimport FormControlLabel from \"@mui/material/FormControlLabel\";\nimport FormControl from \"@mui/material/FormControl\";\nimport FormLabel from \"@mui/material/FormLabel\";\nimport Box from \"@mui/material/Box\";\nimport InputLabel from \"@mui/material/InputLabel\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport Select from \"@mui/material/Select\";\nimport './Pastorders.css'\nimport { Typography } from \"@material-ui/core\";\nimport ReactDOM from \"react-dom\";\nimport { useDispatch } from \"react-redux\";\nimport { logout } from \"../actions/userActions\";\nimport FormGroup from '@mui/material/FormGroup';\nimport Checkbox from '@mui/material/Checkbox';\nimport { LocationOn} from \"@mui/icons-material\";\n\n\nconst Pastorders = () => {\n  const history= useHistory();\n  const dispatch= useDispatch();\n  const [headbg, setheadbg] = useState(\"transparent\");\n  const [shadow, setshadow] = useState(\"none\");\n  const [mode, setMode] = useState(\"pickup\")\n  // const [pickup, setPickup] = useState()\n  // const [delivery, setDelivery] = useState()\n  const [orders, setOrders] = useState([\n    {\n      restaurantName: \"restaurantName\",\n      date: \"date\",\n      total: \"total\",\n    },\n  ]);\n  const [orderdetails, setOrderdetails] = useState([])\n  const [filteredOrders, setFilteredOrders] = useState(orders);\n  const [filters, setFilters] = useState([]);\n  const [pd, updatePD] = useState({\n    delivery: true,\n    pickup: true,\n  })\n\n  useEffect(() => {\n    axios\n      .post(\"http://localhost:8081/order/getcusorder\", {\n        customerId: JSON.parse(localStorage.getItem(\"customer\")).customerId,\n      })\n      .then((res) => {\n        console.log(res);\n        setOrders(res.data)\n        \n      })\n\n  }, []);\n\n  const getdetails= (invoiceId)=>{\n    axios\n    .post(\"http://localhost:8081/order/getcusdetail\", {\n      customerId: JSON.parse(localStorage.getItem(\"customer\")).customerId,\n      invoiceId : invoiceId,\n    })\n    .then((res) => {\n      console.log(res);\n      setOrderdetails(res.data)\n    })\n  }\n    \n  \n\n  window.addEventListener(\"scroll\", () => {\n    if (window.scrollY >= 50) {\n      setheadbg(\"#FFFFFF\");\n      setshadow(\"rgb(226 226 226) 0px -2px 0px inset\");\n     \n    } else {\n      setheadbg(\"transparent\");\n      setshadow(\"none\");\n   \n    }\n  });\n\n  const [status, setStatus] = useState(\"\");\n  \n  useEffect(() => {\n    if(pd.pickup===true && pd.delivery===false){\n      console.log(\"pi\")\n      setFilters([\"Order received\", \"Preparing\", \" Pickup Ready\", \"Picked up\"])\n      console.log(filters)\n    }\n    else if(pd.delivery===true && pd.pickup===false){\n      console.log(\"de\")\n      setFilters([\"Order received\", \"Preparing\", \"On the way\", \"Delivered\"])\n    }\n    else{\n      \n      setFilters([\"All orders\",\"Order received\", \"Preparing\", \"On the way\", \"Delivered\", \" Pickup Ready\", \"Picked up\"])\n    }\n    console.log(pd)\n  }, [pd])\n\n  // const filters = [\"All orders\",\"Order received\", \"Preparing\", \"On the way\", \"Delivered\", \" Pickup Ready\", \"Picked up\"]\n\n   \n      // [\"Order Received\", \"Preparing\", \"On the way\", \"Delivered\"]\n      // [\"Order Received\", \"Preparing\", \" Pick up Ready\", \"Picked Up\"];\n\n  const handleChange = (event) => {\n    setStatus(event.target.value);\n  };\n\n  useEffect(() => {\n    if(status==\"All orders\"){\n      setFilteredOrders(orders)\n    }\n    else setFilteredOrders(orders.filter((order) => order.ostatus === status));\n  }, [status]);\n\n  useEffect(() => setFilteredOrders(orders), [orders])\n\n  const useModal = () => {\n    const [isShowing, setIsShowing] = useState(false);\n\n    function toggle() {\n      setIsShowing(!isShowing);\n    }\n\n    return {\n      isShowing,\n      toggle,\n    };\n  };\n\n  const Modal = ({ isShowing, hide , total}) =>\n    isShowing\n      ? ReactDOM.createPortal(\n          <React.Fragment>\n            <div className=\"modal-overlay\" />\n            <div\n              className=\"modal-wrapper\"\n              aria-modal\n              aria-hidden\n              tabIndex={-1}\n              role=\"dialog\"\n            >\n              <div className=\"modal\">\n                <div className=\"modal-header\" style={{justifyContent: 'flex-end'}}>\n                  <button\n                    type=\"button\"\n                    className=\"modal-close-button\"\n                    data-dismiss=\"modal\"\n                    aria-label=\"Close\"\n                    onClick={hide}\n                  >\n                    <span aria-hidden=\"true\">&times;</span>\n                  </button>\n                </div>\n                <Typography component=\"div\" variant=\"h5\"></Typography>\n                <Typography\n                  variant=\"subtitle1\"\n                  color=\"text.secondary\"\n                  component=\"div\"\n                >\n                  <br />\n                  Order details\n                </Typography>\n                <Grid container spacing={3}>\n                  {orderdetails.map((dish) => (\n                      <Grid container item>\n                        <Grid container xs={4}>\n                          {dish.dname}\n                        </Grid>\n                        <Grid container xs={4}>\n                          {dish.quantity}\n                        </Grid>\n                        <Grid container xs={4}>\n                          {dish.subtotal}\n                        </Grid>\n                      </Grid>\n                    ))}\n                  <Grid container item>\n                    <Grid container xs={4}></Grid>\n                    <Grid container xs={4}>\n                      Total Price :\n                    </Grid>\n                    <Grid container xs={4}>\n                    {total}\n                    </Grid>\n                  </Grid>\n                </Grid>\n                <Box\n                  sx={{ display: \"flex\", alignItems: \"center\", pl: 1, pb: 1 }}\n                >\n                </Box>\n              </div>\n            </div>\n          </React.Fragment>,\n          document.body\n        )\n      : null;\n  const { isShowing, toggle } = useModal();\n\n  \n  function signout(){\n    dispatch(logout());\n    localStorage.setItem(\"customer\",null);\n    history.push(\"/\")\n  }\n\n\n  return (\n    <div >\n      <div className=\"header__upper\">\n        <div\n          className=\"header__upperheader\"\n          style={{ backgroundColor: headbg, boxShadow: shadow }}\n        >\n          <div className=\"header__upperheaderleft\">\n            <Link to=\"/chome\">\n              <img\n                src=\"https://d3i4yxtzktqr9n.cloudfront.net/web-eats-v2/ee037401cb5d31b23cf780808ee4ec1f.svg \"\n                alt=\"uber eats\"\n              />{\" \"}\n            </Link>\n          </div>\n\n          <div className=\"header__upperheadercenter\"   >\n          <LocationOn />\n<input type=\"text\" placeholder=\"What are you craving? \" />\n</div>\n\n\n          <div className=\"header__upperheaderright\" onClick={signout}>\n            <p> Sign out </p>\n          </div>\n        </div>\n      </div>\n     \n      <div\n        style={{\n          paddingTop: \"100px\",\n          height: \"100vh\",\n          paddingLeft:'45px',\n          paddingRight:'45px'\n          \n        }}\n        container\n        direction={\"row\"}\n      >\n        <div style ={{\n                  paddingBottom: '30px',\n                }}>\n        <h1>Past Orders</h1>\n      </div>\n        <Box sx={{ minWidth: 120 }} style ={{\n                  color: \"black\",\n                  paddingBottom:'30px'\n                }}>\n        \n\n            <FormGroup style={{display:\"flex\"}}>\n                <FormControlLabel   value=\"pickup\"  onChange={\n                  (event) => updatePD(\n                    {...pd,\n                      pickup: event.target.checked\n                    }\n                  )\n                }control={<Checkbox  defaultChecked=\"true\" style ={{\n                  color: \"black\",\n                }}/>} label=\"Pick-up\"/>\n\n                <FormControlLabel  value=\"delivery\"   onChange={\n                  (event) => updatePD(\n                    {...pd,\n                      delivery: event.target.checked\n                    }\n                  )\n                }\n                   control={<Checkbox defaultChecked=\"true\" style ={{\n                  color: \"black\",\n                }} />} label=\"Delivery\" />\n           </FormGroup>\n          <FormControl fullWidth style ={{\n                  color: \"black\",\n                }}>\n            <InputLabel id=\"demo-simple-select-label\">Order status</InputLabel>\n            <Select\n              labelId=\"demo-simple-select-label\"\n              id=\"demo-simple-select\"\n              value={status}\n              label=\"Status\"\n              onChange={handleChange}\n              style ={{\n                color: \"black\",\n              }}\n            >\n              {filters.map((filter) => (\n                <MenuItem value={filter}>{filter}</MenuItem>\n              ))}\n            </Select>\n          </FormControl>\n        </Box>\n        <table\n          style={{\n            width: \"100%\",\n            paddingTop:'30px'\n          }}\n        >\n          <tr>\n            <th>Restaurant Name</th>\n            <th>Order Date</th>\n            <th>Amount</th>\n            <th>Mode of delivery</th>\n          </tr> \n\n          {/* Use filterredOrders for this */}\n          {filteredOrders.map((order) => (\n            <tr onClick={()=>{toggle()\n            getdetails(order.invoiceId)}}>\n              <td>{order.rname}</td>\n              <td>{order.orderDate}</td>\n              <td>{order.total}</td>\n              <td>{order.mode}</td>\n              <Modal\n              isShowing={isShowing}\n              hide={toggle}\n              total= {order.total}\n              style={{ position: \"absolute\", width: \"240px\", height: \"340px\" }}\n            />\n            </tr>\n          ))}\n        </table>\n      </div>\n    </div>\n  );\n};\n\nexport default Pastorders;\n"]},"metadata":{},"sourceType":"module"}