{"ast":null,"code":"import _slicedToArray from\"/Users/gunjalgupta/Desktop/ubereatss/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from'react';import{Link}from'react-router-dom';import axios from'axios';import M from'materialize-css';import{Formik}from'formik';import{Button}from'react-bootstrap';import{BrowserRouter as Router,useHistory}from'react-router-dom';import{CountryDropdown,RegionDropdown}from\"react-country-region-selector-material-ui-new\";import'./UpdateProfile.css';import Showprofile from'./Showprofile';import Profilepic from'./Profilepic';import{useDispatch}from\"react-redux\";import{logout}from\"../actions/userActions\";import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';//import \"materialize-css/dist/css/materialize.min.css\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UpdateProfile=function UpdateProfile(){var history=useHistory();var dispatch=useDispatch();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),customerData=_useState2[0],setcustomerData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),image=_useState4[0],setImage=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),url=_useState6[0],setUrl=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),dob=_useState8[0],setDob=_useState8[1];var _useState9=useState('transparent'),_useState10=_slicedToArray(_useState9,2),headbg=_useState10[0],setheadbg=_useState10[1];var _useState11=useState('none'),_useState12=_slicedToArray(_useState11,2),shadow=_useState12[0],setshadow=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),inputdisplay=_useState14[0],setinputdisplay=_useState14[1];window.addEventListener('scroll',function(){if(window.scrollY>=50){setheadbg('#FFFFFF');setshadow('rgb(226 226 226) 0px -2px 0px inset');setinputdisplay(1);}else{setheadbg('transparent');setshadow('none');setinputdisplay(0);}});function signout(){dispatch(logout());localStorage.setItem(\"customer\",null);history.push(\"/\");}useEffect(function(){var customerId=JSON.parse(localStorage.getItem(\"customer\")).customerId;axios.get(\"http://localhost:8081/customerprofile/\".concat(customerId),{}).then(function(response){console.log(\"res\",response);if(response.data.error){console.log(\"res\",response);M.toast({html:response.data.error,classes:\"#c62828 red darken-3\"});}else{setcustomerData(response.data[0]);console.log(response.data[0]);//console.log(\"resss \",customerData);\nlocalStorage.setItem('customer',JSON.stringify(response.data[0]));setDob(customerData.DOB==null?customerData.DOB:customerData.DOB.substr(0,10));}});// console.log(\"res\",response);\n// if (response.data.error) {\n//     console.log(\"res\",response.data[0]);\n//    // M.toast({ html: response.data[0].error, classes: \"#c62828 red darken-3\" })\n// }\n},[]);return customerData.email?/*#__PURE__*/_jsx(\"section\",{className:\"section\",id:\"about\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"update\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header__upper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header__upperheader\",style:{backgroundColor:headbg,boxShadow:shadow},children:[/*#__PURE__*/_jsx(\"div\",{className:\"header__upperheaderleft\",children:/*#__PURE__*/_jsxs(Link,{to:\"/chome\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://d3i4yxtzktqr9n.cloudfront.net/web-eats-v2/ee037401cb5d31b23cf780808ee4ec1f.svg \",alt:\"uber eats\"}),\"  \"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"header__upperheaderright\",onClick:signout,children:/*#__PURE__*/_jsx(\"p\",{children:\" Sign out \"})})]})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"details_img\",children:[/*#__PURE__*/_jsx(Showprofile,{}),/*#__PURE__*/_jsx(Profilepic,{})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(Formik,{style:{width:'40%'},initialValues:{cname:customerData.cname,email:customerData.email,mobileNo:customerData.mobileNo,city:customerData.city,stateId:customerData.stateId,countryId:customerData.countryId,DOB:customerData.DOB?customerData.DOB.substr(0,20):null,nickname:customerData.nickname,about:customerData.about},onSubmit:function onSubmit(values,_ref){var setSubmitting=_ref.setSubmitting,resetForm=_ref.resetForm;console.log(values);// if (image) {\n//     const data = new FormData()\n//     data.append(\"api_key\", '757831828593633');\n//     data.append(\"file\", image)\n//     data.append(\"upload_preset\", \"l3ihyhha\")\n//     data.append(\"cloud_name\", \"du8oeufnp\")\n//     fetch(\"https://api.cloudinary.com/v1_1/du8oeufnp/image/upload\", {\n//         method: \"post\",\n//         body: data\n//     }).then(res => res.json())\n//         .then(res => {\n//             console.log(res + \"Hiii\")\n//             setUrl(res.url)\n//         })\n//         .catch(err => {\n//             console.log(err)\n//         })\n// }\nvar customerId=JSON.parse(localStorage.getItem(\"customer\")).customerId;console.log(customerId);axios.post(\"http://localhost:8081/customerprofile/updatedetails/\",{customerId:customerId,values:values}).then(function(response){console.log(\"update\",response);if(response.data.error){M.toast({html:response.data.error,classes:\"#c62828 red darken-3\"});}else{toast.success('Updated details successful',{position:\"top-right\",autoClose:5000,hideProgressBar:true,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});}}).catch(function(err){console.log(err);});//history.push('/chome')\n},children:function children(_ref2){var errors=_ref2.errors,handleBlur=_ref2.handleBlur,handleChange=_ref2.handleChange,handleSubmit=_ref2.handleSubmit,isSubmitting=_ref2.isSubmitting,touched=_ref2.touched,values=_ref2.values;return/*#__PURE__*/_jsxs(\"form\",{id:\"contactForm\",style:{width:'40%'},name:\"sentMessage\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-weight-normal\",style:{fontFamily:'UberMoveText-Medium,Helvetica,sans-serif'},children:\" Update details\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-12\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{style:{width:\"100%\"},children:[\"Customer Name\",/*#__PURE__*/_jsx(\"input\",{required:true,type:\"text\",style:{width:\"100%\",borderRadius:0},className:\"form-control\",id:\"cname\",onBlur:handleBlur,onChange:handleChange,value:values.cname})]}),/*#__PURE__*/_jsx(\"p\",{className:\"help-block text-danger\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{style:{width:\"100%\"},children:[\" Email \",/*#__PURE__*/_jsx(\"input\",{required:true,type:\"text\",style:{width:\"100%\",borderRadius:0},className:\"form-control\",id:\"email\",onBlur:handleBlur,onChange:handleChange,value:values.email})]}),/*#__PURE__*/_jsx(\"p\",{className:\"help-block text-danger\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{style:{width:\"100%\"},children:[\"Contact Number \",/*#__PURE__*/_jsx(\"input\",{required:true,type:\"number\",style:{width:\"100%\",borderRadius:0},className:\"form-control\",id:\"mobileNo\",onBlur:handleBlur,onChange:handleChange,value:values.mobileNo})]}),/*#__PURE__*/_jsx(\"p\",{className:\"help-block text-danger\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{style:{width:\"100%\"},children:[\"City \",/*#__PURE__*/_jsx(\"input\",{type:\"text\",style:{width:\"100%\",borderRadius:0},className:\"form-control\",id:\"city\",onBlur:handleBlur,onChange:handleChange,value:values.city})]}),/*#__PURE__*/_jsx(\"p\",{className:\"help-block text-danger\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{style:{width:\"100%\"},children:[\"Country\",/*#__PURE__*/_jsx(CountryDropdown,{style:{width:\"100%\"},value:values.countryId,className:\"form-control\",id:\"countryId\",onBlur:handleBlur,onChange:handleChange(\"countryId\")})]}),/*#__PURE__*/_jsx(\"p\",{className:\"help-block text-danger\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"State  \",/*#__PURE__*/_jsx(RegionDropdown,{style:{width:\"100%\"},country:values.countryId,value:values.stateId,className:\"form-control\",id:\"stateId\",onBlur:handleBlur,onChange:handleChange(\"stateId\")})]}),/*#__PURE__*/_jsx(\"p\",{className:\"help-block text-danger\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{style:{width:\"100%\"},children:[\"Description \",/*#__PURE__*/_jsx(\"input\",{type:\"text\",style:{width:\"100%\",borderRadius:0},className:\"form-control\",id:\"about\",onBlur:handleBlur,onChange:handleChange,value:values.about})]}),/*#__PURE__*/_jsx(\"p\",{className:\"help-block text-danger\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{style:{width:\"100%\"},children:[\"Date of birth \",/*#__PURE__*/_jsx(\"input\",{type:\"date\",style:{width:\"100%\",borderRadius:0},className:\"form-control\",id:\"DOB\",onBlur:handleBlur,onChange:handleChange,value:values.DOB})]}),/*#__PURE__*/_jsx(\"p\",{className:\"help-block text-danger\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{style:{width:\"100%\"},children:[\"Nickname \",/*#__PURE__*/_jsx(\"input\",{type:\"text\",style:{width:\"100%\",borderRadius:0},className:\"form-control\",id:\"nickname\",onBlur:handleBlur,onChange:handleChange,value:values.nickname})]}),/*#__PURE__*/_jsx(\"p\",{className:\"help-block text-danger\"})]}),/*#__PURE__*/_jsx(ToastContainer,{position:\"top-right\",autoClose:5000,hideProgressBar:true,newestOnTop:false,closeOnClick:true,rtl:false,pauseOnFocusLoss:true,draggable:true,pauseOnHover:true})]})}),/*#__PURE__*/_jsx(Button,{type:\"submit\",className:\"update_button\",style:{width:\"100%\",borderRadius:5},children:\"Save changes\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]});}})})]})}):/*#__PURE__*/_jsx(\"h1\",{})// <form onSubmit={submit}>\n//   <input\n//     type=\"text\"\n//     name=\"user name \"\n//     value={customerData.cname}\n//     onChange={e => setUser({ ...user, name: e.target.value })}\n//   />\n//   {user.errors.name && <p>{user.errors.name}</p>}\n//   <input\n//     type=\"email\"\n//     name=\"user[email]\"\n//     value={user.email}\n//     onChange={e => setUser({ ...user, email: e.target.value })}\n//   />\n//   {user.errors.name && <p>{user.errors.name}</p>}\n//   <input type=\"submit\" name=\"Sign Up\" />\n// </form>\n;};export default UpdateProfile;","map":{"version":3,"sources":["/Users/gunjalgupta/Desktop/ubereatss/frontend/src/customer/UpdateProfile.js"],"names":["React","useState","useEffect","useContext","Link","axios","M","Formik","Button","BrowserRouter","Router","useHistory","CountryDropdown","RegionDropdown","Showprofile","Profilepic","useDispatch","logout","ToastContainer","toast","UpdateProfile","history","dispatch","customerData","setcustomerData","image","setImage","url","setUrl","dob","setDob","headbg","setheadbg","shadow","setshadow","inputdisplay","setinputdisplay","window","addEventListener","scrollY","signout","localStorage","setItem","push","customerId","JSON","parse","getItem","get","then","response","console","log","data","error","html","classes","stringify","DOB","substr","email","backgroundColor","boxShadow","width","cname","mobileNo","city","stateId","countryId","nickname","about","values","setSubmitting","resetForm","post","success","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","catch","err","errors","handleBlur","handleChange","handleSubmit","isSubmitting","touched","fontFamily","borderRadius"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react'\n\nimport { Link } from 'react-router-dom'\nimport axios from 'axios';\nimport M from 'materialize-css'\nimport { Formik } from 'formik';\nimport { Button } from 'react-bootstrap'\nimport { BrowserRouter as Router, useHistory } from 'react-router-dom'\nimport { CountryDropdown, RegionDropdown } from \"react-country-region-selector-material-ui-new\";\nimport './UpdateProfile.css'\nimport Showprofile from './Showprofile';\nimport Profilepic from './Profilepic';\nimport { useDispatch } from \"react-redux\";\nimport { logout } from \"../actions/userActions\";\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n//import \"materialize-css/dist/css/materialize.min.css\";\n\nconst UpdateProfile = () => {\n    const history = useHistory()\n    const dispatch = useDispatch()\n    const [customerData, setcustomerData] = useState([])\n    const [image, setImage] = useState([])\n    const [url, setUrl] = useState([])\n    const [dob, setDob] = useState([])\n    const [headbg,setheadbg]=useState('transparent');\n    const [shadow,setshadow]=useState('none');\n    const [inputdisplay,setinputdisplay]=useState(0);\n\n\n  window.addEventListener('scroll',()=>{\n    if(window.scrollY>=50){\n      setheadbg('#FFFFFF');\n      setshadow('rgb(226 226 226) 0px -2px 0px inset');\n      setinputdisplay(1);\n\n    }\n    else{\n      setheadbg('transparent');\n      setshadow('none');\n      setinputdisplay(0);\n\n\n    }\n  })\n\n\n  function signout(){\n    dispatch(logout());\n    localStorage.setItem(\"customer\",null);\n    history.push(\"/\")\n  }\n\n    useEffect( () => {\n        const customerId =  JSON.parse(localStorage.getItem(\"customer\")).customerId;\n\n        axios.get(`http://localhost:8081/customerprofile/${customerId}`,{})\n        .then(response => {\n            console.log(\"res\",response);\n            if (response.data.error) {\n                console.log(\"res\",response);\n                M.toast({ html: response.data.error, classes: \"#c62828 red darken-3\" })\n            }\n            else {\n\n                    setcustomerData(response.data[0])\n                    console.log(response.data[0])\n                    //console.log(\"resss \",customerData);\n                    localStorage.setItem('customer', JSON.stringify(response.data[0]));\n\n                    setDob((customerData.DOB == null )? customerData.DOB : customerData.DOB.substr(0,10));\n                \n            }\n        })\n       \n            // console.log(\"res\",response);\n            // if (response.data.error) {\n            //     console.log(\"res\",response.data[0]);\n            //    // M.toast({ html: response.data[0].error, classes: \"#c62828 red darken-3\" })\n            // }\n        \n            \n    }, []\n        );\n\n\nreturn (customerData.email?\n   \n    \n                    <section className=\"section\" id=\"about\">\n                <div className=\"update\" >\n                   \n                    <div className=\"header__upper\">\n                <div className=\"header__upperheader\"  style={{backgroundColor:headbg,boxShadow:shadow}}   >\n                 \n                  <div className=\"header__upperheaderleft\">\n                  <Link to = \"/chome\">\n                     <img\n                         src=\"https://d3i4yxtzktqr9n.cloudfront.net/web-eats-v2/ee037401cb5d31b23cf780808ee4ec1f.svg \"\n                          alt=\"uber eats\" />  </Link>\n                 </div>\n                \n                 {/* <div className=\"header__upperheadercenter\"   >\n                 \n                    <input type=\"text\" placeholder=\"What are you craving? \" />\n                 </div> */}\n\n                 <div className=\"header__upperheaderright\"  onClick={signout}>\n                      <p> Sign out </p>\n                 </div>\n                </div>\n             </div>\n                   \n                    <br />\n                    <br />\n                    <div className= \"details_img\">\n                    <Showprofile />\n                    <Profilepic />\n                    </div>\n                    <div className=\"row\" >\n                    \n                   \n                    {\n                        \n                    \n                        <Formik\n                            style={{ width: '40%' }}\n                            initialValues={{\n                                cname: customerData.cname,\n                                email: customerData.email,\n                                mobileNo : customerData.mobileNo,\n                                city: customerData.city,\n                                stateId: customerData.stateId,\n                                countryId: customerData.countryId,\n                                \n                                DOB: customerData.DOB?customerData.DOB.substr(0,20):null,\n                                nickname: customerData.nickname,\n                                about: customerData.about,\n                                \n                            }}\n                            onSubmit={(values, { setSubmitting, resetForm }) => {\n                                console.log(values)\n                                // if (image) {\n                                //     const data = new FormData()\n                                //     data.append(\"api_key\", '757831828593633');\n                                //     data.append(\"file\", image)\n                                //     data.append(\"upload_preset\", \"l3ihyhha\")\n                                //     data.append(\"cloud_name\", \"du8oeufnp\")\n                                //     fetch(\"https://api.cloudinary.com/v1_1/du8oeufnp/image/upload\", {\n                                //         method: \"post\",\n                                //         body: data\n                                //     }).then(res => res.json())\n                                //         .then(res => {\n                                //             console.log(res + \"Hiii\")\n                                //             setUrl(res.url)\n                                //         })\n                                //         .catch(err => {\n                                //             console.log(err)\n                                //         })\n                                // }\n                                const customerId = JSON.parse(localStorage.getItem(\"customer\")).customerId\n                                console.log(customerId)\n                                axios.post(`http://localhost:8081/customerprofile/updatedetails/`, { customerId ,values: values})\n                                    .then(response => {\n                                        console.log(\"update\",response)\n                                        if (response.data.error) {\n                                            M.toast({ html: response.data.error, classes: \"#c62828 red darken-3\" })\n                                        }\n                                        else {\n                                            toast.success('Updated details successful', {\n                                                position: \"top-right\",\n                                                autoClose: 5000,\n                                                hideProgressBar: true,\n                                                closeOnClick: true,\n                                                pauseOnHover: true,\n                                                draggable: true,\n                                                progress: undefined,\n                                                });\n                                            \n                                        }\n                                    }).catch(err => {\n                                        console.log(err)\n                                    })\n                                //history.push('/chome')\n                            }}>\n                            {({\n                                errors,\n                                handleBlur,\n                                handleChange,\n                                handleSubmit,\n                                isSubmitting,\n                                touched,\n                                values\n                            }) => (\n                                <form id=\"contactForm\" style={{ width: '40%' }} name=\"sentMessage\" onSubmit={handleSubmit}>\n                                    <h4 className=\"font-weight-normal\" style={{ fontFamily: 'UberMoveText-Medium,Helvetica,sans-serif' }}> Update details</h4>\n                                    <br />\n                                    \n                                    <div className=\"row\">\n                                        <div className=\"col-md-12\">\n                                            <div className=\"form-group\">\n                                                <label style={{ width: \"100%\" }}>Customer Name<input required type=\"text\" style={{ width: \"100%\", borderRadius: 0 }} className=\"form-control\" id=\"cname\"  onBlur={handleBlur} onChange={handleChange} value={values.cname} /></label>\n                                                <p className=\"help-block text-danger\"></p>\n                                            </div>\n                                            <div className=\"form-group\" >\n                                                <label style={{ width: \"100%\" }}> Email <input required type=\"text\" style={{ width: \"100%\", borderRadius: 0 }} className=\"form-control\" id=\"email\" onBlur={handleBlur} onChange={handleChange} value={values.email} /></label>\n                                                <p className=\"help-block text-danger\"></p>\n                                            </div>\n                                            <div className=\"form-group\" >\n                                                <label style={{ width: \"100%\" }}>Contact Number <input required type=\"number\" style={{ width: \"100%\", borderRadius: 0 }} className=\"form-control\" id=\"mobileNo\" onBlur={handleBlur} onChange={handleChange} value={values.mobileNo} /></label>\n                                                <p className=\"help-block text-danger\"></p>\n                                            </div>\n                                            <div className=\"form-group\" >\n                                                <label style={{ width: \"100%\" }}>City <input type=\"text\" style={{ width: \"100%\", borderRadius: 0 }} className=\"form-control\" id=\"city\" onBlur={handleBlur} onChange={handleChange} value={values.city} /></label>\n                                                <p className=\"help-block text-danger\"></p>\n                                            </div>\n                                            <div className=\"form-group\" >\n                                                <label style={{ width: \"100%\" }}>Country<CountryDropdown style={{ width: \"100%\" }}value={values.countryId} className=\"form-control\" id=\"countryId\" onBlur={handleBlur} onChange= {handleChange(\"countryId\")} /></label>\n                                                <p className=\"help-block text-danger\"></p>\n                                            </div>\n                                            <div className=\"form-group\" >\n                                            <label>State  <RegionDropdown style={{ width: \"100%\" }} country={values.countryId} value={values.stateId} className=\"form-control\" id=\"stateId\" onBlur={handleBlur} onChange={handleChange(\"stateId\") }/></label>\n                                                <p className=\"help-block text-danger\"></p>\n                                            </div>\n                                            <div className=\"form-group\" >\n                                                <label style={{ width: \"100%\" }}>Description <input type=\"text\" style={{ width: \"100%\", borderRadius: 0 }} className=\"form-control\" id=\"about\" onBlur={handleBlur} onChange={handleChange} value={values.about} /></label>\n                                                <p className=\"help-block text-danger\"></p>\n                                            </div>\n                                            <div className=\"form-group\" >\n                                                <label style={{ width: \"100%\" }}>Date of birth <input type=\"date\" style={{ width: \"100%\", borderRadius: 0 }} className=\"form-control\" id=\"DOB\" onBlur={handleBlur} onChange={handleChange} value={values.DOB} /></label>\n                                                <p className=\"help-block text-danger\"></p>\n                                            </div>\n                                            <div className=\"form-group\" >\n                                                <label style={{ width: \"100%\" }}>Nickname <input type=\"text\" style={{ width: \"100%\", borderRadius: 0 }} className=\"form-control\" id=\"nickname\" onBlur={handleBlur} onChange={handleChange} value={values.nickname} /></label>\n                                                <p className=\"help-block text-danger\"></p>\n                                            </div>\n                                            <ToastContainer\nposition=\"top-right\"\nautoClose={5000}\nhideProgressBar\nnewestOnTop={false}\ncloseOnClick\nrtl={false}\npauseOnFocusLoss\ndraggable\npauseOnHover\n/>\n                                    \n                                        </div>\n                                    </div>\n                                    <Button type=\"submit\" className= \"update_button\"style={{ width: \"100%\", borderRadius: 5 }} >\n                                        Save changes\n                                    </Button>\n                                    <br />\n                                    <br />\n                                </form>\n                                \n                            )}\n                        </Formik>\n                        \n}\n                    </div>\n                </div>\n            </section>:<h1></h1> \n        \n\n\n    // <form onSubmit={submit}>\n    //   <input\n    //     type=\"text\"\n    //     name=\"user name \"\n    //     value={customerData.cname}\n    //     onChange={e => setUser({ ...user, name: e.target.value })}\n    //   />\n    //   {user.errors.name && <p>{user.errors.name}</p>}\n\n    //   <input\n    //     type=\"email\"\n    //     name=\"user[email]\"\n    //     value={user.email}\n    //     onChange={e => setUser({ ...user, email: e.target.value })}\n    //   />\n    //   {user.errors.name && <p>{user.errors.name}</p>}\n\n    //   <input type=\"submit\" name=\"Sign Up\" />\n    // </form>\n          \n  )\n}\n  export default UpdateProfile;"]},"metadata":{},"sourceType":"module"}