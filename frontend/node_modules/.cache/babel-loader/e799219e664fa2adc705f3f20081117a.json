{"ast":null,"code":"import _regeneratorRuntime from\"/Users/gunjalgupta/Desktop/ubereatss/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/gunjalgupta/Desktop/ubereatss/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/gunjalgupta/Desktop/ubereatss/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/Users/gunjalgupta/Desktop/ubereatss/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useEffect,useState}from\"react\";import MaterialTable from\"material-table\";import{forwardRef}from'react';import{Link}from'react-router-dom';import AddBox from'@material-ui/icons/AddBox';import ArrowDownward from'@material-ui/icons/ArrowDownward';import Check from'@material-ui/icons/Check';import ChevronLeft from'@material-ui/icons/ChevronLeft';import ChevronRight from'@material-ui/icons/ChevronRight';import Clear from'@material-ui/icons/Clear';import DeleteOutline from'@material-ui/icons/DeleteOutline';import Edit from'@material-ui/icons/Edit';import FilterList from'@material-ui/icons/FilterList';import FirstPage from'@material-ui/icons/FirstPage';import LastPage from'@material-ui/icons/LastPage';import Remove from'@material-ui/icons/Remove';import SaveAlt from'@material-ui/icons/SaveAlt';import Search from'@material-ui/icons/Search';import ViewColumn from'@material-ui/icons/ViewColumn';import{useDispatch}from\"react-redux\";import{logoutRestaurant}from\"../actions/resActions\";import{BrowserRouter as Router,useHistory}from'react-router-dom';import axios from\"axios\";import LaunchIcon from'@mui/icons-material/Launch';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AllOrders(){var tableIcons={Add:/*#__PURE__*/forwardRef(function(props,ref){return/*#__PURE__*/_jsx(AddBox,_objectSpread(_objectSpread({},props),{},{ref:ref}));}),Check:/*#__PURE__*/forwardRef(function(props,ref){return/*#__PURE__*/_jsx(Check,_objectSpread(_objectSpread({},props),{},{ref:ref}));}),Clear:/*#__PURE__*/forwardRef(function(props,ref){return/*#__PURE__*/_jsx(Clear,_objectSpread(_objectSpread({},props),{},{ref:ref}));}),Delete:/*#__PURE__*/forwardRef(function(props,ref){return/*#__PURE__*/_jsx(DeleteOutline,_objectSpread(_objectSpread({},props),{},{ref:ref}));}),DetailPanel:/*#__PURE__*/forwardRef(function(props,ref){return/*#__PURE__*/_jsx(ChevronRight,_objectSpread(_objectSpread({},props),{},{ref:ref}));}),Edit:/*#__PURE__*/forwardRef(function(props,ref){return/*#__PURE__*/_jsx(Edit,_objectSpread(_objectSpread({},props),{},{ref:ref}));}),Export:/*#__PURE__*/forwardRef(function(props,ref){return/*#__PURE__*/_jsx(SaveAlt,_objectSpread(_objectSpread({},props),{},{ref:ref}));}),Filter:/*#__PURE__*/forwardRef(function(props,ref){return/*#__PURE__*/_jsx(FilterList,_objectSpread(_objectSpread({},props),{},{ref:ref}));}),FirstPage:/*#__PURE__*/forwardRef(function(props,ref){return/*#__PURE__*/_jsx(FirstPage,_objectSpread(_objectSpread({},props),{},{ref:ref}));}),LastPage:/*#__PURE__*/forwardRef(function(props,ref){return/*#__PURE__*/_jsx(LastPage,_objectSpread(_objectSpread({},props),{},{ref:ref}));}),NextPage:/*#__PURE__*/forwardRef(function(props,ref){return/*#__PURE__*/_jsx(ChevronRight,_objectSpread(_objectSpread({},props),{},{ref:ref}));}),PreviousPage:/*#__PURE__*/forwardRef(function(props,ref){return/*#__PURE__*/_jsx(ChevronLeft,_objectSpread(_objectSpread({},props),{},{ref:ref}));}),ResetSearch:/*#__PURE__*/forwardRef(function(props,ref){return/*#__PURE__*/_jsx(Clear,_objectSpread(_objectSpread({},props),{},{ref:ref}));}),Search:/*#__PURE__*/forwardRef(function(props,ref){return/*#__PURE__*/_jsx(Search,_objectSpread(_objectSpread({},props),{},{ref:ref}));}),SortArrow:/*#__PURE__*/forwardRef(function(props,ref){return/*#__PURE__*/_jsx(ArrowDownward,_objectSpread(_objectSpread({},props),{},{ref:ref}));}),ThirdStateCheck:/*#__PURE__*/forwardRef(function(props,ref){return/*#__PURE__*/_jsx(Remove,_objectSpread(_objectSpread({},props),{},{ref:ref}));}),ViewColumn:/*#__PURE__*/forwardRef(function(props,ref){return/*#__PURE__*/_jsx(ViewColumn,_objectSpread(_objectSpread({},props),{},{ref:ref}));})};var history=useHistory();var dispatch=useDispatch();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),status=_useState4[0],setStatus=_useState4[1];var _useState5=useState('transparent'),_useState6=_slicedToArray(_useState5,2),headbg=_useState6[0],setheadbg=_useState6[1];var _useState7=useState('none'),_useState8=_slicedToArray(_useState7,2),shadow=_useState8[0],setshadow=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),deliveryData=_useState10[0],setDeliveryData=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),pickupData=_useState12[0],setPickupData=_useState12[1];var _useState13=useState({\"placed\":'Placed',\"Preparing\":'Preparing',\"on the way\":\"on the way\",\" delivered\":\"delivered\"}),_useState14=_slicedToArray(_useState13,2),lookup=_useState14[0],setLookup=_useState14[1];window.addEventListener('scroll',function(){if(window.scrollY>=50){setheadbg('#FFFFFF');setshadow('rgb(226 226 226) 0px -2px 0px inset');}else{setheadbg('transparent');setshadow('none');}});function signout(){dispatch(logoutRestaurant());localStorage.setItem(\"restaurant\",null);history.push(\"/\");}useEffect(function(){var restaurantId=JSON.parse(localStorage.getItem(\"restaurant\")).restaurantId;axios.post(\"http://localhost:8081/order/getresorders/\".concat(restaurantId),{}).then(function(responseData){console.log(\"res\",responseData);if(responseData.data.error){console.log(\"res\",responseData);// M.toast({ html: responseData.data.error, classes: \"#c62828 red darken-3\" })\n}else{var tempdatadel=[];var tempdatapic=[];responseData.data.forEach(function(row){if(row.mode==\"delivery\"){if(row.ostatus==\"Order received\"||row.ostatus==\"Preparing\"||row.ostatus==\"On the way\"){tempdatadel.push(_objectSpread(_objectSpread({},row),{},{status:\"New order\"}));}else if(row.ostatus==\"Delivered\"){tempdatadel.push(_objectSpread(_objectSpread({},row),{},{status:\"Delivered order\"}));}else if(row.ostatus==\"Cancelled\"){tempdatadel.push(_objectSpread(_objectSpread({},row),{},{status:\"Cancelled order\"}));}}else{if(row.ostatus==\"Order received\"||row.ostatus==\"Preparing\"||row.ostatus==\"Pickup ready\"){tempdatapic.push(_objectSpread(_objectSpread({},row),{},{status:\"New order\"}));}else if(row.ostatus==\"Picked up\"){tempdatapic.push(_objectSpread(_objectSpread({},row),{},{status:\"Delivered order\"}));}else if(row.ostatus==\"Cancelled\"){tempdatapic.push(_objectSpread(_objectSpread({},row),{},{status:\"Cancelled order\"}));}}console.log(\"here\",row);});//setcustomerData(responseData.data)\nsetDeliveryData(tempdatadel);setPickupData(tempdatapic);setData(tempdatadel);console.log(\"restaurant\",responseData.data);//console.log(\"resss \",customerData);\n//localStorage.setItem(\"restaurant\", JSON.stringify(responseData.data));\n}});},[status]);var _useState15=useState(),_useState16=_slicedToArray(_useState15,2),columns=_useState16[0],setColumns=_useState16[1];// if mode == delivery then lookup:  { \"placed\": 'Placed', \"Preparing\": 'Preparing', on the way, delivered },\n//else lookup:  { \"placed\": 'Placed', \"Preparing\": 'Preparing', pickup ready, picked up },\nvar saveStatus=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(ostatus,orderId){var req;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:req={ostatus:ostatus,orderId:orderId};//const restaurantId =1\n_context.next=3;return axios.post(\"http://localhost:8081/order/status\",req).then(function(responseData){if(responseData.data.error){//console.log(\"res\",responseData);\n// M.toast({ html: responseData.data.error, classes: \"#c62828 red darken-3\" })\n}else{//console.log(\" dishes\",responseData.data)\n//setcustomerData(responseData.data)\n//setDishes(responseData.data)\n//console.log(\"resss \",customerData);\n//localStorage.setItem('dish', JSON.stringify(responseData.data));\n}});case 3:case\"end\":return _context.stop();}}},_callee);}));return function saveStatus(_x,_x2){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"header__upper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header__upperheader\",style:{backgroundColor:headbg,boxShadow:shadow},children:[/*#__PURE__*/_jsx(\"div\",{className:\"header__upperheaderleft\",children:/*#__PURE__*/_jsx(Link,{to:\"/rhome\",children:/*#__PURE__*/_jsx(\"img\",{src:\"https://d3i4yxtzktqr9n.cloudfront.net/web-eats-v2/ee037401cb5d31b23cf780808ee4ec1f.svg \",alt:\"uber eats\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"header__upperheaderright\",onClick:signout,children:/*#__PURE__*/_jsx(\"p\",{children:\" Sign out \"})})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{paddingTop:90,paddingLeft:20,paddingRight:20},children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){setData(pickupData);setLookup({\"Order received\":'Order received',\"Preparing\":'Preparing',\"Pickup ready\":\"Pickup ready\",\"Picked up\":\"Picked up\"});},children:\"Pickup orders\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){setData(deliveryData);setLookup({\"Order received\":'Order received',\"Preparing\":'Preparing',\"On the way\":\"On the way\",\" Delivered\":\"Delivered\"});},children:\"Delivery orders\"}),/*#__PURE__*/_jsx(MaterialTable,{icons:tableIcons,title:\"Orders\",columns:[{title:'Invoice number',field:'orderId',editable:'never',grouping:false},{title:'Customer name',field:'cname',editable:'never'},{title:'Email',field:'email',initialEditValue:'initial edit value',editable:'never',grouping:false},{title:'Contact Number',field:'mobileNo',type:'numeric',editable:'never',grouping:false},{title:'Mode of delivery',field:'mode',editable:'never',grouping:false},{title:'Status',field:\"status\",editable:'never'},{title:'Order Status',field:'ostatus',lookup:lookup}],data:data,actions:[{icon:function icon(){return/*#__PURE__*/_jsx(LaunchIcon,{});},tooltip:'See customer',onClick:function onClick(event,rowData){return history.push(\"/cusprofile/\".concat(rowData.customerId));}}],cellEditable:{onCellEditApproved:function onCellEditApproved(newValue,oldValue,rowData,columnDef){return new Promise(function(resolve,reject){console.log('newValue: '+newValue);console.log('newValue: '+rowData.orderId);setStatus(newValue);saveStatus(newValue,rowData.orderId);setTimeout(resolve,1000);});}},options:{grouping:true}})]})]});}export default AllOrders;","map":{"version":3,"sources":["/Users/gunjalgupta/Desktop/ubereatss/frontend/src/restaurant/AllOrders.js"],"names":["React","useEffect","useState","MaterialTable","forwardRef","Link","AddBox","ArrowDownward","Check","ChevronLeft","ChevronRight","Clear","DeleteOutline","Edit","FilterList","FirstPage","LastPage","Remove","SaveAlt","Search","ViewColumn","useDispatch","logoutRestaurant","BrowserRouter","Router","useHistory","axios","LaunchIcon","AllOrders","tableIcons","Add","props","ref","Delete","DetailPanel","Export","Filter","NextPage","PreviousPage","ResetSearch","SortArrow","ThirdStateCheck","history","dispatch","data","setData","status","setStatus","headbg","setheadbg","shadow","setshadow","deliveryData","setDeliveryData","pickupData","setPickupData","lookup","setLookup","window","addEventListener","scrollY","signout","localStorage","setItem","push","restaurantId","JSON","parse","getItem","post","then","responseData","console","log","error","tempdatadel","tempdatapic","forEach","row","mode","ostatus","columns","setColumns","saveStatus","orderId","req","backgroundColor","boxShadow","paddingTop","paddingLeft","paddingRight","title","field","editable","grouping","initialEditValue","type","icon","tooltip","onClick","event","rowData","customerId","onCellEditApproved","newValue","oldValue","columnDef","Promise","resolve","reject","setTimeout"],"mappings":"4oBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA4BC,QAA5B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,aAAP,KAA0B,gBAA1B,CACA,OAASC,UAAT,KAA2B,OAA3B,CACA,OAASC,IAAT,KAAqB,kBAArB,CAEA,MAAOC,CAAAA,MAAP,KAAmB,2BAAnB,CACA,MAAOC,CAAAA,aAAP,KAA0B,kCAA1B,CACA,MAAOC,CAAAA,KAAP,KAAkB,0BAAlB,CACA,MAAOC,CAAAA,WAAP,KAAwB,gCAAxB,CACA,MAAOC,CAAAA,YAAP,KAAyB,iCAAzB,CACA,MAAOC,CAAAA,KAAP,KAAkB,0BAAlB,CACA,MAAOC,CAAAA,aAAP,KAA0B,kCAA1B,CACA,MAAOC,CAAAA,IAAP,KAAiB,yBAAjB,CACA,MAAOC,CAAAA,UAAP,KAAuB,+BAAvB,CACA,MAAOC,CAAAA,SAAP,KAAsB,8BAAtB,CACA,MAAOC,CAAAA,QAAP,KAAqB,6BAArB,CACA,MAAOC,CAAAA,MAAP,KAAmB,2BAAnB,CACA,MAAOC,CAAAA,OAAP,KAAoB,4BAApB,CACA,MAAOC,CAAAA,MAAP,KAAmB,2BAAnB,CACA,MAAOC,CAAAA,UAAP,KAAuB,+BAAvB,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,gBAAT,KAAiC,uBAAjC,CACA,OAASC,aAAa,GAAIC,CAAAA,MAA1B,CAAkCC,UAAlC,KAAoD,kBAApD,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,UAAP,KAAuB,4BAAvB,C,wFAKA,QAASC,CAAAA,SAAT,EAAqB,CACjB,GAAMC,CAAAA,UAAU,CAAG,CACfC,GAAG,cAAE1B,UAAU,CAAC,SAAC2B,KAAD,CAAQC,GAAR,qBAAgB,KAAC,MAAD,gCAAYD,KAAZ,MAAmB,GAAG,CAAEC,GAAxB,GAAhB,EAAD,CADA,CAEfxB,KAAK,cAAEJ,UAAU,CAAC,SAAC2B,KAAD,CAAQC,GAAR,qBAAgB,KAAC,KAAD,gCAAWD,KAAX,MAAkB,GAAG,CAAEC,GAAvB,GAAhB,EAAD,CAFF,CAGfrB,KAAK,cAAEP,UAAU,CAAC,SAAC2B,KAAD,CAAQC,GAAR,qBAAgB,KAAC,KAAD,gCAAWD,KAAX,MAAkB,GAAG,CAAEC,GAAvB,GAAhB,EAAD,CAHF,CAIfC,MAAM,cAAE7B,UAAU,CAAC,SAAC2B,KAAD,CAAQC,GAAR,qBAAgB,KAAC,aAAD,gCAAmBD,KAAnB,MAA0B,GAAG,CAAEC,GAA/B,GAAhB,EAAD,CAJH,CAKfE,WAAW,cAAE9B,UAAU,CAAC,SAAC2B,KAAD,CAAQC,GAAR,qBAAgB,KAAC,YAAD,gCAAkBD,KAAlB,MAAyB,GAAG,CAAEC,GAA9B,GAAhB,EAAD,CALR,CAMfnB,IAAI,cAAET,UAAU,CAAC,SAAC2B,KAAD,CAAQC,GAAR,qBAAgB,KAAC,IAAD,gCAAUD,KAAV,MAAiB,GAAG,CAAEC,GAAtB,GAAhB,EAAD,CAND,CAOfG,MAAM,cAAE/B,UAAU,CAAC,SAAC2B,KAAD,CAAQC,GAAR,qBAAgB,KAAC,OAAD,gCAAaD,KAAb,MAAoB,GAAG,CAAEC,GAAzB,GAAhB,EAAD,CAPH,CAQfI,MAAM,cAAEhC,UAAU,CAAC,SAAC2B,KAAD,CAAQC,GAAR,qBAAgB,KAAC,UAAD,gCAAgBD,KAAhB,MAAuB,GAAG,CAAEC,GAA5B,GAAhB,EAAD,CARH,CASfjB,SAAS,cAAEX,UAAU,CAAC,SAAC2B,KAAD,CAAQC,GAAR,qBAAgB,KAAC,SAAD,gCAAeD,KAAf,MAAsB,GAAG,CAAEC,GAA3B,GAAhB,EAAD,CATN,CAUfhB,QAAQ,cAAEZ,UAAU,CAAC,SAAC2B,KAAD,CAAQC,GAAR,qBAAgB,KAAC,QAAD,gCAAcD,KAAd,MAAqB,GAAG,CAAEC,GAA1B,GAAhB,EAAD,CAVL,CAWfK,QAAQ,cAAEjC,UAAU,CAAC,SAAC2B,KAAD,CAAQC,GAAR,qBAAgB,KAAC,YAAD,gCAAkBD,KAAlB,MAAyB,GAAG,CAAEC,GAA9B,GAAhB,EAAD,CAXL,CAYfM,YAAY,cAAElC,UAAU,CAAC,SAAC2B,KAAD,CAAQC,GAAR,qBAAgB,KAAC,WAAD,gCAAiBD,KAAjB,MAAwB,GAAG,CAAEC,GAA7B,GAAhB,EAAD,CAZT,CAafO,WAAW,cAAEnC,UAAU,CAAC,SAAC2B,KAAD,CAAQC,GAAR,qBAAgB,KAAC,KAAD,gCAAWD,KAAX,MAAkB,GAAG,CAAEC,GAAvB,GAAhB,EAAD,CAbR,CAcfb,MAAM,cAAEf,UAAU,CAAC,SAAC2B,KAAD,CAAQC,GAAR,qBAAgB,KAAC,MAAD,gCAAYD,KAAZ,MAAmB,GAAG,CAAEC,GAAxB,GAAhB,EAAD,CAdH,CAefQ,SAAS,cAAEpC,UAAU,CAAC,SAAC2B,KAAD,CAAQC,GAAR,qBAAgB,KAAC,aAAD,gCAAmBD,KAAnB,MAA0B,GAAG,CAAEC,GAA/B,GAAhB,EAAD,CAfN,CAgBfS,eAAe,cAAErC,UAAU,CAAC,SAAC2B,KAAD,CAAQC,GAAR,qBAAgB,KAAC,MAAD,gCAAYD,KAAZ,MAAmB,GAAG,CAAEC,GAAxB,GAAhB,EAAD,CAhBZ,CAiBfZ,UAAU,cAAEhB,UAAU,CAAC,SAAC2B,KAAD,CAAQC,GAAR,qBAAgB,KAAC,UAAD,gCAAgBD,KAAhB,MAAuB,GAAG,CAAEC,GAA5B,GAAhB,EAAD,CAjBP,CAAnB,CAoBA,GAAMU,CAAAA,OAAO,CAAGjB,UAAU,EAA1B,CACA,GAAMkB,CAAAA,QAAQ,CAAGtB,WAAW,EAA5B,CACA,cAAwBnB,QAAQ,CAAC,EAAD,CAAhC,wCAAO0C,IAAP,eAAaC,OAAb,eACA,eAA4B3C,QAAQ,CAAC,EAAD,CAApC,yCAAO4C,MAAP,eAAeC,SAAf,eAEA,eAAyB7C,QAAQ,CAAC,aAAD,CAAjC,yCAAO8C,MAAP,eAAcC,SAAd,eACA,eAAyB/C,QAAQ,CAAC,MAAD,CAAjC,yCAAOgD,MAAP,eAAcC,SAAd,eACA,eAAwCjD,QAAQ,CAAC,EAAD,CAAhD,0CAAOkD,YAAP,gBAAqBC,eAArB,gBACA,gBAAoCnD,QAAQ,CAAC,EAAD,CAA5C,2CAAOoD,UAAP,gBAAmBC,aAAnB,gBACA,gBAA4BrD,QAAQ,CAAC,CAAG,SAAU,QAAb,CAAuB,YAAa,WAApC,CAAiD,aAAc,YAA/D,CAA6E,aAAa,WAA1F,CAAD,CAApC,2CAAOsD,MAAP,gBAAeC,SAAf,gBAIFC,MAAM,CAACC,gBAAP,CAAwB,QAAxB,CAAiC,UAAI,CACnC,GAAGD,MAAM,CAACE,OAAP,EAAgB,EAAnB,CAAsB,CACpBX,SAAS,CAAC,SAAD,CAAT,CACAE,SAAS,CAAC,qCAAD,CAAT,CAED,CAJD,IAKI,CACFF,SAAS,CAAC,aAAD,CAAT,CACAE,SAAS,CAAC,MAAD,CAAT,CAID,CACF,CAbD,EAeA,QAASU,CAAAA,OAAT,EAAkB,CAChBlB,QAAQ,CAACrB,gBAAgB,EAAjB,CAAR,CACAwC,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAkC,IAAlC,EACArB,OAAO,CAACsB,IAAR,CAAa,GAAb,EACD,CAED/D,SAAS,CAAC,UAAI,CACZ,GAAMgE,CAAAA,YAAY,CAAIC,IAAI,CAACC,KAAL,CAAWL,YAAY,CAACM,OAAb,CAAqB,YAArB,CAAX,EAA+CH,YAArE,CACAvC,KAAK,CACJ2C,IADD,oDACkDJ,YADlD,EACkE,EADlE,EAECK,IAFD,CAEM,SAACC,YAAD,CAAkB,CACtBC,OAAO,CAACC,GAAR,CAAY,KAAZ,CAAmBF,YAAnB,EACA,GAAIA,YAAY,CAAC3B,IAAb,CAAkB8B,KAAtB,CAA6B,CAC3BF,OAAO,CAACC,GAAR,CAAY,KAAZ,CAAmBF,YAAnB,EACA;AACD,CAHD,IAGO,CACH,GAAMI,CAAAA,WAAW,CAAG,EAApB,CACA,GAAMC,CAAAA,WAAW,CAAG,EAApB,CACAL,YAAY,CAAC3B,IAAb,CAAkBiC,OAAlB,CAA0B,SAACC,GAAD,CAAO,CAC/B,GAAGA,GAAG,CAACC,IAAJ,EAAU,UAAb,CAAwB,CACpB,GAAGD,GAAG,CAACE,OAAJ,EAAa,gBAAb,EAAiCF,GAAG,CAACE,OAAJ,EAAa,WAA9C,EAA6DF,GAAG,CAACE,OAAJ,EAAa,YAA7E,CACA,CACIL,WAAW,CAACX,IAAZ,gCAAqBc,GAArB,MAA0BhC,MAAM,CAAE,WAAlC,IACH,CAHD,IAIK,IAAGgC,GAAG,CAACE,OAAJ,EAAa,WAAhB,CAA4B,CAC7BL,WAAW,CAACX,IAAZ,gCAAqBc,GAArB,MAA0BhC,MAAM,CAAE,iBAAlC,IACH,CAFI,IAGA,IAAGgC,GAAG,CAACE,OAAJ,EAAa,WAAhB,CAA4B,CAE7BL,WAAW,CAACX,IAAZ,gCAAqBc,GAArB,MAA0BhC,MAAM,CAAE,iBAAlC,IACH,CAEJ,CAbD,IAeK,CACD,GAAGgC,GAAG,CAACE,OAAJ,EAAa,gBAAb,EAAiCF,GAAG,CAACE,OAAJ,EAAa,WAA9C,EAA6DF,GAAG,CAACE,OAAJ,EAAa,cAA7E,CACA,CAEIJ,WAAW,CAACZ,IAAZ,gCAAqBc,GAArB,MAA0BhC,MAAM,CAAE,WAAlC,IACH,CAJD,IAKK,IAAGgC,GAAG,CAACE,OAAJ,EAAa,WAAhB,CAA4B,CAC7BJ,WAAW,CAACZ,IAAZ,gCAAqBc,GAArB,MAA0BhC,MAAM,CAAE,iBAAlC,IACH,CAFI,IAGA,IAAGgC,GAAG,CAACE,OAAJ,EAAa,WAAhB,CAA4B,CAC7BJ,WAAW,CAACZ,IAAZ,gCAAqBc,GAArB,MAA0BhC,MAAM,CAAE,iBAAlC,IACH,CAEJ,CACD0B,OAAO,CAACC,GAAR,CAAY,MAAZ,CAAmBK,GAAnB,EACH,CA/BC,EAiCF;AACAzB,eAAe,CAACsB,WAAD,CAAf,CACApB,aAAa,CAACqB,WAAD,CAAb,CACA/B,OAAO,CAAC8B,WAAD,CAAP,CACAH,OAAO,CAACC,GAAR,CAAY,YAAZ,CAA0BF,YAAY,CAAC3B,IAAvC,EACA;AACA;AACD,CACF,CAnDD,EAqDD,CAvDQ,CAuDP,CAACE,MAAD,CAvDO,CAAT,CAyDE,gBAA8B5C,QAAQ,EAAtC,2CAAO+E,OAAP,gBAAgBC,UAAhB,gBAEA;AACA;AAEA,GAAMC,CAAAA,UAAU,0FAAG,iBAAOH,OAAP,CAAeI,OAAf,0HACTC,GADS,CACH,CAAEL,OAAO,CAAEA,OAAX,CACZI,OAAO,CAAEA,OADG,CADG,CAGf;AAHe,sBAIT1D,CAAAA,KAAK,CAAC2C,IAAN,CAAW,oCAAX,CAAgDgB,GAAhD,EACLf,IADK,CACA,SAAAC,YAAY,CAAI,CAClB,GAAIA,YAAY,CAAC3B,IAAb,CAAkB8B,KAAtB,CAA6B,CACzB;AACD;AACF,CAHD,IAIK,CACH;AACM;AACA;AAEA;AACA;AAEP,CACJ,CAfK,CAJS,uDAAH,kBAAVS,CAAAA,UAAU,gDAAhB,CAuBA,mBACG,oCACC,YAAK,SAAS,CAAC,eAAf,uBACG,aAAK,SAAS,CAAC,qBAAf,CAAsC,KAAK,CAAE,CAACG,eAAe,CAACtC,MAAjB,CAAwBuC,SAAS,CAACrC,MAAlC,CAA7C,wBACE,YAAK,SAAS,CAAC,yBAAf,uBACA,KAAC,IAAD,EAAM,EAAE,CAAC,QAAT,uBACG,YACI,GAAG,CAAC,yFADR,CAEK,GAAG,CAAC,WAFT,EADH,EADA,EADF,cAYC,YAAK,SAAS,CAAC,0BAAf,CAA0C,OAAO,CAAEW,OAAnD,uBACK,iCADL,EAZD,GADH,EADD,cAsBD,aAAK,KAAK,CAAE,CAAC2B,UAAU,CAAC,EAAZ,CAAgBC,WAAW,CAAC,EAA5B,CAAgCC,YAAY,CAAC,EAA7C,CAAZ,wBAEI,eAAQ,OAAO,CAAE,kBAAM,CACnB7C,OAAO,CAACS,UAAD,CAAP,CACDG,SAAS,CAAC,CAAE,iBAAkB,gBAApB,CAAsC,YAAa,WAAnD,CAAgE,eAAgB,cAAhF,CAAgG,YAAa,WAA7G,CAAD,CAAT,CAAsI,CAFzI,2BAFJ,cAMI,eAAQ,OAAO,CAAE,kBAAM,CACnBZ,OAAO,CAACO,YAAD,CAAP,CAEAK,SAAS,CAAC,CAAG,iBAAkB,gBAArB,CAAuC,YAAa,WAApD,CAAiE,aAAc,YAA/E,CAA6F,aAAa,WAA1G,CAAD,CAAT,CAAoI,CAHxI,6BANJ,cAWA,KAAC,aAAD,EACE,KAAK,CAAE5B,UADT,CAEE,KAAK,CAAC,QAFR,CAIE,OAAO,CAAE,CACL,CAAE8D,KAAK,CAAE,gBAAT,CAA2BC,KAAK,CAAE,SAAlC,CAA6CC,QAAQ,CAAE,OAAvD,CAAgEC,QAAQ,CAAE,KAA1E,CADK,CAEL,CAAEH,KAAK,CAAE,eAAT,CAA0BC,KAAK,CAAE,OAAjC,CAA0CC,QAAQ,CAAE,OAApD,CAFK,CAGL,CAAEF,KAAK,CAAE,OAAT,CAAkBC,KAAK,CAAE,OAAzB,CAAkCG,gBAAgB,CAAE,oBAApD,CAA2EF,QAAQ,CAAE,OAArF,CAA8FC,QAAQ,CAAE,KAAxG,CAHK,CAIL,CAAEH,KAAK,CAAE,gBAAT,CAA2BC,KAAK,CAAE,UAAlC,CAA8CI,IAAI,CAAE,SAApD,CAAgEH,QAAQ,CAAE,OAA1E,CAAmFC,QAAQ,CAAE,KAA7F,CAJK,CAKL,CAAEH,KAAK,CAAE,kBAAT,CAA6BC,KAAK,CAAE,MAApC,CAA6CC,QAAQ,CAAE,OAAvD,CAAgEC,QAAQ,CAAE,KAA1E,CALK,CAML,CAAEH,KAAK,CAAE,QAAT,CAAmBC,KAAK,CAAE,QAA1B,CAAqCC,QAAQ,CAAE,OAA/C,CANK,CAOL,CACEF,KAAK,CAAE,cADT,CAEEC,KAAK,CAAE,SAFT,CAGEpC,MAAM,CAAEA,MAHV,CAPK,CAJX,CAkBE,IAAI,CAAEZ,IAlBR,CAmBE,OAAO,CAAE,CACP,CACEqD,IAAI,CAAE,mCAAM,KAAC,UAAD,IAAN,EADR,CAEEC,OAAO,CAAE,cAFX,CAGEC,OAAO,CAAE,iBAACC,KAAD,CAAQC,OAAR,QACT3D,CAAAA,OAAO,CAACsB,IAAR,uBAA4BqC,OAAO,CAACC,UAApC,EADS,EAHX,CADO,CAnBX,CA2BE,YAAY,CAAE,CACZC,kBAAkB,CAAE,4BAACC,QAAD,CAAWC,QAAX,CAAqBJ,OAArB,CAA8BK,SAA9B,CAA4C,CAC9D,MAAO,IAAIC,CAAAA,OAAJ,CAAY,SAACC,OAAD,CAAUC,MAAV,CAAqB,CACtCrC,OAAO,CAACC,GAAR,CAAY,aAAe+B,QAA3B,EACAhC,OAAO,CAACC,GAAR,CAAY,aAAe4B,OAAO,CAACjB,OAAnC,EACArC,SAAS,CAACyD,QAAD,CAAT,CACArB,UAAU,CAACqB,QAAD,CAAWH,OAAO,CAACjB,OAAnB,CAAV,CACA0B,UAAU,CAACF,OAAD,CAAU,IAAV,CAAV,CACD,CANM,CAAP,CAOD,CATW,CA3BhB,CAsCE,OAAO,CAAE,CACLd,QAAQ,CAAE,IADL,CAtCX,EAXA,GAtBC,GADH,CA+ED,CAED,cAAelE,CAAAA,SAAf","sourcesContent":["import React, { useEffect , useState} from \"react\";\nimport MaterialTable from \"material-table\";\nimport { forwardRef } from 'react';\nimport { Link } from 'react-router-dom'\n\nimport AddBox from '@material-ui/icons/AddBox';\nimport ArrowDownward from '@material-ui/icons/ArrowDownward';\nimport Check from '@material-ui/icons/Check';\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\nimport ChevronRight from '@material-ui/icons/ChevronRight';\nimport Clear from '@material-ui/icons/Clear';\nimport DeleteOutline from '@material-ui/icons/DeleteOutline';\nimport Edit from '@material-ui/icons/Edit';\nimport FilterList from '@material-ui/icons/FilterList';\nimport FirstPage from '@material-ui/icons/FirstPage';\nimport LastPage from '@material-ui/icons/LastPage';\nimport Remove from '@material-ui/icons/Remove';\nimport SaveAlt from '@material-ui/icons/SaveAlt';\nimport Search from '@material-ui/icons/Search';\nimport ViewColumn from '@material-ui/icons/ViewColumn';\nimport { useDispatch } from \"react-redux\";\nimport { logoutRestaurant } from \"../actions/resActions\";\nimport { BrowserRouter as Router, useHistory } from 'react-router-dom'\nimport axios from \"axios\";\nimport LaunchIcon from '@mui/icons-material/Launch';\n\n\n\n\nfunction AllOrders() {\n    const tableIcons = {\n        Add: forwardRef((props, ref) => <AddBox {...props} ref={ref} />),\n        Check: forwardRef((props, ref) => <Check {...props} ref={ref} />),\n        Clear: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n        Delete: forwardRef((props, ref) => <DeleteOutline {...props} ref={ref} />),\n        DetailPanel: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n        Edit: forwardRef((props, ref) => <Edit {...props} ref={ref} />),\n        Export: forwardRef((props, ref) => <SaveAlt {...props} ref={ref} />),\n        Filter: forwardRef((props, ref) => <FilterList {...props} ref={ref} />),\n        FirstPage: forwardRef((props, ref) => <FirstPage {...props} ref={ref} />),\n        LastPage: forwardRef((props, ref) => <LastPage {...props} ref={ref} />),\n        NextPage: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n        PreviousPage: forwardRef((props, ref) => <ChevronLeft {...props} ref={ref} />),\n        ResetSearch: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n        Search: forwardRef((props, ref) => <Search {...props} ref={ref} />),\n        SortArrow: forwardRef((props, ref) => <ArrowDownward {...props} ref={ref} />),\n        ThirdStateCheck: forwardRef((props, ref) => <Remove {...props} ref={ref} />),\n        ViewColumn: forwardRef((props, ref) => <ViewColumn {...props} ref={ref} />)\n      };\n\n    const history = useHistory()\n    const dispatch = useDispatch()\n    const [data, setData] = useState([])\n    const [status, setStatus] = useState([])\n\n    const [headbg,setheadbg]=useState('transparent');\n    const [shadow,setshadow]=useState('none');\n    const [deliveryData, setDeliveryData] = useState([]);\n    const [pickupData, setPickupData] = useState([]);\n    const [lookup, setLookup] = useState({  \"placed\": 'Placed', \"Preparing\": 'Preparing', \"on the way\": \"on the way\", \" delivered\":\"delivered\"  });\n\n\n\n  window.addEventListener('scroll',()=>{\n    if(window.scrollY>=50){\n      setheadbg('#FFFFFF');\n      setshadow('rgb(226 226 226) 0px -2px 0px inset');\n\n    }\n    else{\n      setheadbg('transparent');\n      setshadow('none');\n     \n\n\n    }\n  })\n\n  function signout(){\n    dispatch(logoutRestaurant());\n    localStorage.setItem(\"restaurant\",null);\n    history.push(\"/\")\n  }\n\n  useEffect(()=>{\n    const restaurantId =  JSON.parse(localStorage.getItem(\"restaurant\")).restaurantId;\n    axios\n    .post(`http://localhost:8081/order/getresorders/${restaurantId}`, {})\n    .then((responseData) => {\n      console.log(\"res\", responseData);\n      if (responseData.data.error) {\n        console.log(\"res\", responseData);\n        // M.toast({ html: responseData.data.error, classes: \"#c62828 red darken-3\" })\n      } else {\n          const tempdatadel = []\n          const tempdatapic = []\n          responseData.data.forEach((row)=>{\n            if(row.mode==\"delivery\"){\n                if(row.ostatus==\"Order received\" || row.ostatus==\"Preparing\" || row.ostatus==\"On the way\")\n                {\n                    tempdatadel.push({...row, status: \"New order\"})\n                }\n                else if(row.ostatus==\"Delivered\"){\n                    tempdatadel.push({...row, status: \"Delivered order\"})\n                }\n                else if(row.ostatus==\"Cancelled\"){\n                    \n                    tempdatadel.push({...row, status: \"Cancelled order\"})\n                }\n                \n            }\n            \n            else {\n                if(row.ostatus==\"Order received\" || row.ostatus==\"Preparing\" || row.ostatus==\"Pickup ready\")\n                {\n                    \n                    tempdatapic.push({...row, status: \"New order\"})\n                }\n                else if(row.ostatus==\"Picked up\"){\n                    tempdatapic.push({...row, status: \"Delivered order\"})\n                }\n                else if(row.ostatus==\"Cancelled\"){\n                    tempdatapic.push({...row, status: \"Cancelled order\"})\n                }\n                \n            }\n            console.log(\"here\",row)\n        })\n    \n        //setcustomerData(responseData.data)\n        setDeliveryData(tempdatadel)\n        setPickupData(tempdatapic)\n        setData(tempdatadel);\n        console.log(\"restaurant\", responseData.data);\n        //console.log(\"resss \",customerData);\n        //localStorage.setItem(\"restaurant\", JSON.stringify(responseData.data));\n      }\n    })\n\n  },[status])\n  \n    const [columns, setColumns] = useState();\n\n    // if mode == delivery then lookup:  { \"placed\": 'Placed', \"Preparing\": 'Preparing', on the way, delivered },\n    //else lookup:  { \"placed\": 'Placed', \"Preparing\": 'Preparing', pickup ready, picked up },\n  \n    const saveStatus = async (ostatus,orderId) =>{\n        const req = { ostatus: ostatus,\n        orderId: orderId}\n        //const restaurantId =1\n        await axios.post(\"http://localhost:8081/order/status\",req)\n        .then(responseData => {\n            if (responseData.data.error) {\n                //console.log(\"res\",responseData);\n               // M.toast({ html: responseData.data.error, classes: \"#c62828 red darken-3\" })\n            }\n            else {\n              //console.log(\" dishes\",responseData.data)\n                    //setcustomerData(responseData.data)\n                    //setDishes(responseData.data)\n                    \n                    //console.log(\"resss \",customerData);\n                    //localStorage.setItem('dish', JSON.stringify(responseData.data));\n                \n            }\n        })\n  \n    }\n  \n    return (\n       <div>\n        <div className=\"header__upper\">\n           <div className=\"header__upperheader\"  style={{backgroundColor:headbg,boxShadow:shadow}}   >\n             <div className=\"header__upperheaderleft\">\n             <Link to='/rhome'>\n                <img\n                    src=\"https://d3i4yxtzktqr9n.cloudfront.net/web-eats-v2/ee037401cb5d31b23cf780808ee4ec1f.svg \"\n                     alt=\"uber eats\" /></Link>\n            </div>\n            {/* <div className=\"header__upperheadercenter\"   >\n               <LocationOn />\n               <input type=\"text\" placeholder=\"What are you craving? \" />\n            </div> */}\n            \n            <div className=\"header__upperheaderright\" onClick={signout}>\n                 <p> Sign out </p>\n            </div>\n            {/* <div className=\"header__upperheaderright\">\n                 <p> Add dishes </p>\n            </div> */}\n           </div>\n        </div> \n      <div style={{paddingTop:90, paddingLeft:20, paddingRight:20}}>\n\n          <button onClick={() => {\n              setData(pickupData)\n             setLookup({ \"Order received\": 'Order received', \"Preparing\": 'Preparing', \"Pickup ready\": \"Pickup ready\", \"Picked up\": \"Picked up\" })}\n          }>Pickup orders</button>\n          <button onClick={() => {\n              setData(deliveryData)\n            \n              setLookup({  \"Order received\": 'Order received', \"Preparing\": 'Preparing', \"On the way\": \"On the way\", \" Delivered\":\"Delivered\"  })}}>\n                  Delivery orders</button>\n      <MaterialTable\n        icons={tableIcons}\n        title=\"Orders\"\n        \n        columns={[\n            { title: 'Invoice number', field: 'orderId' ,editable: 'never', grouping: false },\n            { title: 'Customer name', field: 'cname' ,editable: 'never' },\n            { title: 'Email', field: 'email', initialEditValue: 'initial edit value' , editable: 'never', grouping: false },\n            { title: 'Contact Number', field: 'mobileNo', type: 'numeric' , editable: 'never', grouping: false },\n            { title: 'Mode of delivery', field: 'mode' , editable: 'never', grouping: false },\n            { title: 'Status', field: \"status\" , editable: 'never'},\n            {\n              title: 'Order Status',\n              field: 'ostatus',\n              lookup: lookup,\n            },\n            \n          ]}\n        data={data}\n        actions={[\n          {\n            icon: () => <LaunchIcon />,\n            tooltip: 'See customer',\n            onClick: (event, rowData) => \n            history.push(`/cusprofile/${rowData.customerId}`)\n          }\n        ]}\n        cellEditable={{\n          onCellEditApproved: (newValue, oldValue, rowData, columnDef) => {\n            return new Promise((resolve, reject) => {\n              console.log('newValue: ' + newValue);\n              console.log('newValue: ' + rowData.orderId);\n              setStatus(newValue);\n              saveStatus(newValue, rowData.orderId)\n              setTimeout(resolve, 1000);\n            });\n          }\n        }}\n        options={{\n            grouping: true\n          }}\n      />\n      </div> \n      </div>\n    )\n  }\n  \n  export default AllOrders;"]},"metadata":{},"sourceType":"module"}