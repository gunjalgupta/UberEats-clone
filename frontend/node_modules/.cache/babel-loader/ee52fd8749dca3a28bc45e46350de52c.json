{"ast":null,"code":"var _jsxFileName = \"/Users/gunjalgupta/Desktop/ubereatss/frontend/src/restaurant/Pickuporders.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport MaterialTable from \"material-table\";\nimport { forwardRef } from 'react';\nimport { Link } from 'react-router-dom';\nimport AddBox from '@material-ui/icons/AddBox';\nimport ArrowDownward from '@material-ui/icons/ArrowDownward';\nimport Check from '@material-ui/icons/Check';\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\nimport ChevronRight from '@material-ui/icons/ChevronRight';\nimport Clear from '@material-ui/icons/Clear';\nimport DeleteOutline from '@material-ui/icons/DeleteOutline';\nimport Edit from '@material-ui/icons/Edit';\nimport FilterList from '@material-ui/icons/FilterList';\nimport FirstPage from '@material-ui/icons/FirstPage';\nimport LastPage from '@material-ui/icons/LastPage';\nimport Remove from '@material-ui/icons/Remove';\nimport SaveAlt from '@material-ui/icons/SaveAlt';\nimport Search from '@material-ui/icons/Search';\nimport ViewColumn from '@material-ui/icons/ViewColumn';\nimport { useDispatch } from \"react-redux\";\nimport { logoutRestaurant } from \"../actions/resActions\";\nimport { BrowserRouter as Router, useHistory } from 'react-router-dom';\nimport axios from \"axios\";\nimport { Button } from \"react-bootstrap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Pickuporders() {\n  _s();\n\n  const tableIcons = {\n    Add: /*#__PURE__*/forwardRef((props, ref) => /*#__PURE__*/_jsxDEV(AddBox, { ...props,\n      ref: ref\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 41\n    }, this)),\n    Check: /*#__PURE__*/forwardRef((props, ref) => /*#__PURE__*/_jsxDEV(Check, { ...props,\n      ref: ref\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 43\n    }, this)),\n    Clear: /*#__PURE__*/forwardRef((props, ref) => /*#__PURE__*/_jsxDEV(Clear, { ...props,\n      ref: ref\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 43\n    }, this)),\n    Delete: /*#__PURE__*/forwardRef((props, ref) => /*#__PURE__*/_jsxDEV(DeleteOutline, { ...props,\n      ref: ref\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 44\n    }, this)),\n    DetailPanel: /*#__PURE__*/forwardRef((props, ref) => /*#__PURE__*/_jsxDEV(ChevronRight, { ...props,\n      ref: ref\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 49\n    }, this)),\n    Edit: /*#__PURE__*/forwardRef((props, ref) => /*#__PURE__*/_jsxDEV(Edit, { ...props,\n      ref: ref\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 42\n    }, this)),\n    Export: /*#__PURE__*/forwardRef((props, ref) => /*#__PURE__*/_jsxDEV(SaveAlt, { ...props,\n      ref: ref\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 44\n    }, this)),\n    Filter: /*#__PURE__*/forwardRef((props, ref) => /*#__PURE__*/_jsxDEV(FilterList, { ...props,\n      ref: ref\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 44\n    }, this)),\n    FirstPage: /*#__PURE__*/forwardRef((props, ref) => /*#__PURE__*/_jsxDEV(FirstPage, { ...props,\n      ref: ref\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 47\n    }, this)),\n    LastPage: /*#__PURE__*/forwardRef((props, ref) => /*#__PURE__*/_jsxDEV(LastPage, { ...props,\n      ref: ref\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 46\n    }, this)),\n    NextPage: /*#__PURE__*/forwardRef((props, ref) => /*#__PURE__*/_jsxDEV(ChevronRight, { ...props,\n      ref: ref\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 46\n    }, this)),\n    PreviousPage: /*#__PURE__*/forwardRef((props, ref) => /*#__PURE__*/_jsxDEV(ChevronLeft, { ...props,\n      ref: ref\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 50\n    }, this)),\n    ResetSearch: /*#__PURE__*/forwardRef((props, ref) => /*#__PURE__*/_jsxDEV(Clear, { ...props,\n      ref: ref\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 49\n    }, this)),\n    Search: /*#__PURE__*/forwardRef((props, ref) => /*#__PURE__*/_jsxDEV(Search, { ...props,\n      ref: ref\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 44\n    }, this)),\n    SortArrow: /*#__PURE__*/forwardRef((props, ref) => /*#__PURE__*/_jsxDEV(ArrowDownward, { ...props,\n      ref: ref\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 47\n    }, this)),\n    ThirdStateCheck: /*#__PURE__*/forwardRef((props, ref) => /*#__PURE__*/_jsxDEV(Remove, { ...props,\n      ref: ref\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 53\n    }, this)),\n    ViewColumn: /*#__PURE__*/forwardRef((props, ref) => /*#__PURE__*/_jsxDEV(ViewColumn, { ...props,\n      ref: ref\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 48\n    }, this))\n  };\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const [data, setData] = useState([]);\n  const [status, setStatus] = useState([]);\n  const [headbg, setheadbg] = useState('transparent');\n  const [shadow, setshadow] = useState('none');\n  window.addEventListener('scroll', () => {\n    if (window.scrollY >= 50) {\n      setheadbg('#FFFFFF');\n      setshadow('rgb(226 226 226) 0px -2px 0px inset');\n    } else {\n      setheadbg('transparent');\n      setshadow('none');\n    }\n  });\n\n  function signout() {\n    dispatch(logoutRestaurant());\n    localStorage.setItem(\"restaurant\", null);\n    history.push(\"/\");\n  }\n\n  useEffect(() => {\n    const restaurantId = JSON.parse(localStorage.getItem(\"restaurant\")).restaurantId;\n    axios.post(`http://localhost:8081/order/getresorders/${restaurantId}`, {}).then(responseData => {\n      console.log(\"res\", responseData);\n\n      if (responseData.data.error) {\n        console.log(\"res\", responseData); // M.toast({ html: responseData.data.error, classes: \"#c62828 red darken-3\" })\n      } else {\n        const tempdata = [];\n        responseData.data.forEach(row => {\n          if (row.mode == \"delivery\") {\n            if (row.ostatus == \"placed\" || row.ostatus == \"Preparing\" || row.ostatus == \"On the way\") {\n              tempdata.push({ ...row,\n                status: \"New order\"\n              });\n            } else if (row.ostatus == \"Delivered\") {\n              tempdata.push({ ...row,\n                status: \"Delivered order\"\n              });\n            } else if (row.ostatus == \"Cancelled\") {\n              tempdata.push({ ...row,\n                status: \"Cancelled order\"\n              });\n            }\n          } else {\n            if (row.ostatus == \"placed\" || row.ostatus == \"Preparing\" || row.ostatus == \"Pick up ready\") {\n              tempdata.push({ ...row,\n                status: \"New order\"\n              });\n            } else if (row.ostatus == \"Picked up\") {\n              tempdata.push({ ...row,\n                status: \"Delivered order\"\n              });\n            } else if (row.ostatus == \"Cancelled\") {\n              tempdata.push({ ...row,\n                status: \"Cancelled order\"\n              });\n            }\n          }\n\n          console.log(\"here\", row);\n        });\n        console.log(\"here\", tempdata); //setcustomerData(responseData.data)\n\n        setData(tempdata);\n        console.log(\"restaurant\", responseData.data); //console.log(\"resss \",customerData);\n        //localStorage.setItem(\"restaurant\", JSON.stringify(responseData.data));\n      }\n    }); // .then((res)=>{\n    //     data.map((row)=>{\n    //         if(row.mode==\"delivery\"){\n    //             if(row.ostatus==\"placed\" || row.ostatus==\"Preparing\" || row.ostatus==\"On the way\")\n    //             {\n    //                 row['status']=\"New order\"\n    //             }\n    //             else if(row.ostatus==\"Delivered\"){\n    //                 row['status']=\"Delivered order\"\n    //             }\n    //             else if(row.ostatus==\"Cancelled\"){\n    //                 row['status']=\"Cancelled order\"\n    //             }\n    //         }\n    //         else {\n    //             if(row.ostatus==\"placed\" || row.ostatus==\"Preparing\" || row.ostatus==\"Pick up ready\")\n    //             {\n    //                 row['status']=\"New order\"\n    //             }\n    //             else if(row.ostatus==\"Picked up\"){\n    //                 row['status']=\"Delivered order\"\n    //             }\n    //             else if(row.ostatus==\"Cancelled\"){\n    //                 row['status']=\"Cancelled order\"\n    //             }\n    //         }\n    //         console.log(\"here\",row)\n    //     })\n    //     console.log(data)\n    // })\n  }, [status]);\n  const [columns, setColumns] = useState(); // if mode == delivery then lookup:  { \"placed\": 'Placed', \"Preparing\": 'Preparing', on the way, delivered },\n  //else lookup:  { \"placed\": 'Placed', \"Preparing\": 'Preparing', pickup ready, picked up },\n\n  const saveStatus = async (ostatus, orderId) => {\n    const req = {\n      ostatus: ostatus,\n      orderId: orderId\n    }; //const restaurantId =1\n\n    await axios.post(\"http://localhost:8081/order/status\", req).then(responseData => {\n      if (responseData.data.error) {//console.log(\"res\",responseData);\n        // M.toast({ html: responseData.data.error, classes: \"#c62828 red darken-3\" })\n      } else {//console.log(\" dishes\",responseData.data)\n        //setcustomerData(responseData.data)\n        //setDishes(responseData.data)\n        //console.log(\"resss \",customerData);\n        //localStorage.setItem('dish', JSON.stringify(responseData.data));\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header__upper\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header__upperheader\",\n        style: {\n          backgroundColor: headbg,\n          boxShadow: shadow\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"header__upperheaderleft\",\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/rhome\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"https://d3i4yxtzktqr9n.cloudfront.net/web-eats-v2/ee037401cb5d31b23cf780808ee4ec1f.svg \",\n              alt: \"uber eats\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 14\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 14\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"header__upperheaderright\",\n          onClick: signout,\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \" Sign out \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 18\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 12\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        paddingTop: 90,\n        paddingLeft: 20,\n        paddingRight: 20\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        children: \"submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(MaterialTable, {\n        icons: tableIcons,\n        title: \"All Orders\",\n        columns: [{\n          title: 'Invoice number',\n          field: 'orderId',\n          editable: 'never'\n        }, {\n          title: 'Customer name',\n          field: 'cname',\n          editable: 'never'\n        }, {\n          title: 'Email',\n          field: 'email',\n          initialEditValue: 'initial edit value',\n          editable: 'never'\n        }, {\n          title: 'Contact Number',\n          field: 'mobileNo',\n          type: 'numeric',\n          editable: 'never'\n        }, {\n          title: 'Mode of delivery',\n          field: 'mode',\n          editable: 'never'\n        }, {\n          title: 'Status',\n          field: \"status\",\n          editable: 'never'\n        }, {\n          title: 'Order Status',\n          field: 'ostatus',\n          lookup: data.mode === \"delivery\" ? {\n            \"placed\": 'Placed',\n            \"Preparing\": 'Preparing',\n            \"on the way\": \"on the way\",\n            \" delivered\": \"delivered\"\n          } : {\n            \"placed\": 'Placed',\n            \"Preparing\": 'Preparing',\n            \"pickup ready\": \"pickup ready\",\n            \"picked up\": \"picked up\"\n          }\n        }],\n        data: data,\n        cellEditable: {\n          onCellEditApproved: (newValue, oldValue, rowData, columnDef) => {\n            return new Promise((resolve, reject) => {\n              console.log('newValue: ' + newValue);\n              console.log('newValue: ' + rowData.orderId);\n              setStatus(newValue);\n              saveStatus(newValue, rowData.orderId);\n              setTimeout(resolve, 1000);\n            });\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 198,\n    columnNumber: 8\n  }, this);\n}\n\n_s(Pickuporders, \"hpjNUmNwZcUSNeBhfR7sG8Suvvs=\", false, function () {\n  return [useHistory, useDispatch];\n});\n\n_c = Pickuporders;\nexport default Pickuporders;\n\nvar _c;\n\n$RefreshReg$(_c, \"Pickuporders\");","map":{"version":3,"sources":["/Users/gunjalgupta/Desktop/ubereatss/frontend/src/restaurant/Pickuporders.js"],"names":["React","useEffect","useState","MaterialTable","forwardRef","Link","AddBox","ArrowDownward","Check","ChevronLeft","ChevronRight","Clear","DeleteOutline","Edit","FilterList","FirstPage","LastPage","Remove","SaveAlt","Search","ViewColumn","useDispatch","logoutRestaurant","BrowserRouter","Router","useHistory","axios","Button","Pickuporders","tableIcons","Add","props","ref","Delete","DetailPanel","Export","Filter","NextPage","PreviousPage","ResetSearch","SortArrow","ThirdStateCheck","history","dispatch","data","setData","status","setStatus","headbg","setheadbg","shadow","setshadow","window","addEventListener","scrollY","signout","localStorage","setItem","push","restaurantId","JSON","parse","getItem","post","then","responseData","console","log","error","tempdata","forEach","row","mode","ostatus","columns","setColumns","saveStatus","orderId","req","backgroundColor","boxShadow","paddingTop","paddingLeft","paddingRight","title","field","editable","initialEditValue","type","lookup","onCellEditApproved","newValue","oldValue","rowData","columnDef","Promise","resolve","reject","setTimeout"],"mappings":"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","sourcesContent":["import React, { useEffect , useState} from \"react\";\nimport MaterialTable from \"material-table\";\nimport { forwardRef } from 'react';\nimport { Link } from 'react-router-dom'\n\nimport AddBox from '@material-ui/icons/AddBox';\nimport ArrowDownward from '@material-ui/icons/ArrowDownward';\nimport Check from '@material-ui/icons/Check';\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\nimport ChevronRight from '@material-ui/icons/ChevronRight';\nimport Clear from '@material-ui/icons/Clear';\nimport DeleteOutline from '@material-ui/icons/DeleteOutline';\nimport Edit from '@material-ui/icons/Edit';\nimport FilterList from '@material-ui/icons/FilterList';\nimport FirstPage from '@material-ui/icons/FirstPage';\nimport LastPage from '@material-ui/icons/LastPage';\nimport Remove from '@material-ui/icons/Remove';\nimport SaveAlt from '@material-ui/icons/SaveAlt';\nimport Search from '@material-ui/icons/Search';\nimport ViewColumn from '@material-ui/icons/ViewColumn';\nimport { useDispatch } from \"react-redux\";\nimport { logoutRestaurant } from \"../actions/resActions\";\nimport { BrowserRouter as Router, useHistory } from 'react-router-dom'\nimport axios from \"axios\";\nimport { Button } from \"react-bootstrap\";\n\n\n\nfunction Pickuporders() {\n    const tableIcons = {\n        Add: forwardRef((props, ref) => <AddBox {...props} ref={ref} />),\n        Check: forwardRef((props, ref) => <Check {...props} ref={ref} />),\n        Clear: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n        Delete: forwardRef((props, ref) => <DeleteOutline {...props} ref={ref} />),\n        DetailPanel: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n        Edit: forwardRef((props, ref) => <Edit {...props} ref={ref} />),\n        Export: forwardRef((props, ref) => <SaveAlt {...props} ref={ref} />),\n        Filter: forwardRef((props, ref) => <FilterList {...props} ref={ref} />),\n        FirstPage: forwardRef((props, ref) => <FirstPage {...props} ref={ref} />),\n        LastPage: forwardRef((props, ref) => <LastPage {...props} ref={ref} />),\n        NextPage: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n        PreviousPage: forwardRef((props, ref) => <ChevronLeft {...props} ref={ref} />),\n        ResetSearch: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n        Search: forwardRef((props, ref) => <Search {...props} ref={ref} />),\n        SortArrow: forwardRef((props, ref) => <ArrowDownward {...props} ref={ref} />),\n        ThirdStateCheck: forwardRef((props, ref) => <Remove {...props} ref={ref} />),\n        ViewColumn: forwardRef((props, ref) => <ViewColumn {...props} ref={ref} />)\n      };\n\n    const history = useHistory()\n    const dispatch = useDispatch()\n    const [data, setData] = useState([])\n    const [status, setStatus] = useState([])\n\n    const [headbg,setheadbg]=useState('transparent');\n    const [shadow,setshadow]=useState('none');\n\n\n\n  window.addEventListener('scroll',()=>{\n    if(window.scrollY>=50){\n      setheadbg('#FFFFFF');\n      setshadow('rgb(226 226 226) 0px -2px 0px inset');\n\n    }\n    else{\n      setheadbg('transparent');\n      setshadow('none');\n     \n\n\n    }\n  })\n\n  function signout(){\n    dispatch(logoutRestaurant());\n    localStorage.setItem(\"restaurant\",null);\n    history.push(\"/\")\n  }\n\n  useEffect(()=>{\n    const restaurantId =  JSON.parse(localStorage.getItem(\"restaurant\")).restaurantId;\n    axios\n    .post(`http://localhost:8081/order/getresorders/${restaurantId}`, {})\n    .then((responseData) => {\n      console.log(\"res\", responseData);\n      if (responseData.data.error) {\n        console.log(\"res\", responseData);\n        // M.toast({ html: responseData.data.error, classes: \"#c62828 red darken-3\" })\n      } else {\n          const tempdata = []\n          responseData.data.forEach((row)=>{\n            if(row.mode==\"delivery\"){\n                if(row.ostatus==\"placed\" || row.ostatus==\"Preparing\" || row.ostatus==\"On the way\")\n                {\n                    tempdata.push({...row, status: \"New order\"})\n                }\n                else if(row.ostatus==\"Delivered\"){\n                    tempdata.push({...row, status: \"Delivered order\"})\n                }\n                else if(row.ostatus==\"Cancelled\"){\n                    \n                    tempdata.push({...row, status: \"Cancelled order\"})\n                }\n                \n            }\n            \n            else {\n                if(row.ostatus==\"placed\" || row.ostatus==\"Preparing\" || row.ostatus==\"Pick up ready\")\n                {\n                    \n                    tempdata.push({...row, status: \"New order\"})\n                }\n                else if(row.ostatus==\"Picked up\"){\n                    tempdata.push({...row, status: \"Delivered order\"})\n                }\n                else if(row.ostatus==\"Cancelled\"){\n                    tempdata.push({...row, status: \"Cancelled order\"})\n                }\n                \n            }\n            console.log(\"here\",row)\n        })\n        console.log(\"here\",tempdata)\n    \n        //setcustomerData(responseData.data)\n        setData(tempdata);\n        console.log(\"restaurant\", responseData.data);\n        //console.log(\"resss \",customerData);\n        //localStorage.setItem(\"restaurant\", JSON.stringify(responseData.data));\n      }\n    })\n    // .then((res)=>{\n    //     data.map((row)=>{\n    //         if(row.mode==\"delivery\"){\n    //             if(row.ostatus==\"placed\" || row.ostatus==\"Preparing\" || row.ostatus==\"On the way\")\n    //             {\n    //                 row['status']=\"New order\"\n    //             }\n    //             else if(row.ostatus==\"Delivered\"){\n    //                 row['status']=\"Delivered order\"\n    //             }\n    //             else if(row.ostatus==\"Cancelled\"){\n    //                 row['status']=\"Cancelled order\"\n    //             }\n                \n    //         }\n            \n    //         else {\n    //             if(row.ostatus==\"placed\" || row.ostatus==\"Preparing\" || row.ostatus==\"Pick up ready\")\n    //             {\n    //                 row['status']=\"New order\"\n    //             }\n    //             else if(row.ostatus==\"Picked up\"){\n    //                 row['status']=\"Delivered order\"\n    //             }\n    //             else if(row.ostatus==\"Cancelled\"){\n    //                 row['status']=\"Cancelled order\"\n    //             }\n                \n    //         }\n    //         console.log(\"here\",row)\n    //     })\n    //     console.log(data)\n    // })\n\n  },[status])\n  \n    const [columns, setColumns] = useState();\n\n    // if mode == delivery then lookup:  { \"placed\": 'Placed', \"Preparing\": 'Preparing', on the way, delivered },\n    //else lookup:  { \"placed\": 'Placed', \"Preparing\": 'Preparing', pickup ready, picked up },\n  \n    const saveStatus = async (ostatus,orderId) =>{\n        const req = { ostatus: ostatus,\n        orderId: orderId}\n        //const restaurantId =1\n        await axios.post(\"http://localhost:8081/order/status\",req)\n        .then(responseData => {\n            if (responseData.data.error) {\n                //console.log(\"res\",responseData);\n               // M.toast({ html: responseData.data.error, classes: \"#c62828 red darken-3\" })\n            }\n            else {\n              //console.log(\" dishes\",responseData.data)\n                    //setcustomerData(responseData.data)\n                    //setDishes(responseData.data)\n                    \n                    //console.log(\"resss \",customerData);\n                    //localStorage.setItem('dish', JSON.stringify(responseData.data));\n                \n            }\n        })\n  \n    }\n  \n    return (\n       <div>\n        <div className=\"header__upper\">\n           <div className=\"header__upperheader\"  style={{backgroundColor:headbg,boxShadow:shadow}}   >\n             <div className=\"header__upperheaderleft\">\n             <Link to='/rhome'>\n                <img\n                    src=\"https://d3i4yxtzktqr9n.cloudfront.net/web-eats-v2/ee037401cb5d31b23cf780808ee4ec1f.svg \"\n                     alt=\"uber eats\" /></Link>\n            </div>\n            {/* <div className=\"header__upperheadercenter\"   >\n               <LocationOn />\n               <input type=\"text\" placeholder=\"What are you craving? \" />\n            </div> */}\n            \n            <div className=\"header__upperheaderright\" onClick={signout}>\n                 <p> Sign out </p>\n            </div>\n            {/* <div className=\"header__upperheaderright\">\n                 <p> Add dishes </p>\n            </div> */}\n           </div>\n        </div> \n      <div style={{paddingTop:90, paddingLeft:20, paddingRight:20}}>\n          <button>submit</button>\n      <MaterialTable\n        icons={tableIcons}\n        title=\"All Orders\"\n        \n        columns={[\n            { title: 'Invoice number', field: 'orderId' ,editable: 'never'},\n            { title: 'Customer name', field: 'cname' ,editable: 'never'},\n            { title: 'Email', field: 'email', initialEditValue: 'initial edit value' , editable: 'never'},\n            { title: 'Contact Number', field: 'mobileNo', type: 'numeric' , editable: 'never'},\n            { title: 'Mode of delivery', field: 'mode' , editable: 'never'},\n            { title: 'Status', field: \"status\" , editable: 'never'},\n            {\n              title: 'Order Status',\n              field: 'ostatus',\n              lookup: data.mode === \"delivery\" ? {  \"placed\": 'Placed', \"Preparing\": 'Preparing', \"on the way\": \"on the way\", \" delivered\":\"delivered\"  } : { \"placed\": 'Placed', \"Preparing\": 'Preparing', \"pickup ready\": \"pickup ready\", \"picked up\": \"picked up\" },\n            },\n            \n          ]}\n        data={data}\n        \n        cellEditable={{\n          onCellEditApproved: (newValue, oldValue, rowData, columnDef) => {\n            return new Promise((resolve, reject) => {\n              console.log('newValue: ' + newValue);\n              console.log('newValue: ' + rowData.orderId);\n              setStatus(newValue);\n              saveStatus(newValue, rowData.orderId)\n              setTimeout(resolve, 1000);\n            });\n          }\n        }}\n      />\n      </div> \n      </div>\n    )\n  }\n  \n  export default Pickuporders;"]},"metadata":{},"sourceType":"module"}