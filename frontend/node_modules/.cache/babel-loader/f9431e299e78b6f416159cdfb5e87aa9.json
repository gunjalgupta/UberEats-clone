{"ast":null,"code":"import _regeneratorRuntime from\"/Users/gunjalgupta/Desktop/ubereatss/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/gunjalgupta/Desktop/ubereatss/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/gunjalgupta/Desktop/ubereatss/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import Restaurantpic from\"../components/Restaurantpic\";import{BrowserRouter as Router,useParams,useHistory}from\"react-router-dom\";import ShoppingCartOutlinedIcon from\"@mui/icons-material/ShoppingCartOutlined\";import ReactDOM from\"react-dom\";import axios from\"axios\";import{Link}from\"react-router-dom\";import M from\"materialize-css\";import Typography from\"@mui/material/Typography\";import Dish from\"../components/Dishes\";import{Menu,LocationOn,WatchLater,ArrowDownward}from\"@mui/icons-material\";import Showprofile from\"./Showprofile\";import\"./Resprofile.css\";import Modal from\"@mui/material/Modal\";import Button from\"@mui/material/Button\";import Box from\"@mui/material/Box\";import Paper from\"@mui/material/Paper\";import{experimentalStyled as styled}from\"@mui/material/styles\";import Grid from\"@mui/material/Grid\";import bcrypt from'bcryptjs';import{useDispatch}from\"react-redux\";import{logout}from\"../actions/userActions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var _=require('lodash');function Resprofile(){var history=useHistory();var dispatch=useDispatch();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),restaurant=_useState2[0],setRestaurant=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),dishes=_useState4[0],setDishes=_useState4[1];var _useState5=useState([JSON.parse(localStorage.getItem(\"cart\"))]),_useState6=_slicedToArray(_useState5,2),cart=_useState6[0],setCart=_useState6[1];var _useState7=useState(\"transparent\"),_useState8=_slicedToArray(_useState7,2),headbg=_useState8[0],setheadbg=_useState8[1];var _useState9=useState(\"none\"),_useState10=_slicedToArray(_useState9,2),shadow=_useState10[0],setshadow=_useState10[1];var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),inputdisplay=_useState12[0],setinputdisplay=_useState12[1];var customerId=JSON.parse(localStorage.getItem(\"customer\")).customerId;var _useParams=useParams(),restaurantId=_useParams.restaurantId;var custId=String(JSON.parse(localStorage.getItem(\"customer\")).customerId);var invoiceId=bcrypt.hashSync(custId,10);window.addEventListener(\"scroll\",function(){if(window.scrollY>=50){setheadbg(\"#FFFFFF\");setshadow(\"rgb(226 226 226) 0px -2px 0px inset\");setinputdisplay(1);}else{setheadbg(\"transparent\");setshadow(\"none\");setinputdisplay(0);}});var cartorder={customerId:customerId,restaurantId:Number(restaurantId),total:_.sumBy(JSON.parse(localStorage.getItem(\"cart\")),function(dish){return dish.subtotal;}),invoiceId:invoiceId,dishes:JSON.parse(localStorage.getItem(\"cart\"))?JSON.parse(localStorage.getItem(\"cart\")):[]};localStorage.setItem('order',JSON.stringify(cartorder));var useModal=function useModal(){var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),isShowing=_useState14[0],setIsShowing=_useState14[1];function toggle(){setIsShowing(!isShowing);}return{isShowing:isShowing,toggle:toggle};};var Modal=function Modal(_ref){var isShowing=_ref.isShowing,hide=_ref.hide;return isShowing?/*#__PURE__*/ReactDOM.createPortal(/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\"}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-wrapper\",\"aria-modal\":true,\"aria-hidden\":true,tabIndex:-1,role:\"dialog\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",fontSize:30},children:[\"  \",JSON.parse(localStorage.getItem(\"cart\"))?JSON.parse(localStorage.getItem(\"cart\"))[0].rname:/*#__PURE__*/_jsx(\"p\",{})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-header\",style:{justifyContent:'flex-end'},children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"modal-close-button\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\",onClick:hide,children:/*#__PURE__*/_jsx(\"span\",{\"aria-hidden\":\"true\",children:\"\\xD7\"})})}),/*#__PURE__*/_jsx(Typography,{component:\"div\",variant:\"h5\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle1\",color:\"text.secondary\",component:\"div\",style:{paddingBottom:'25px'},children:[/*#__PURE__*/_jsx(\"br\",{}),localStorage.getItem(\"cart\")?/*#__PURE__*/_jsxs(\"div\",{children:[\"Cart Items\",/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"row\"},children:[/*#__PURE__*/_jsx(\"div\",{children:\"Dish name  \"}),\" \",/*#__PURE__*/_jsx(\"div\",{style:{paddingLeft:\"85px\"},children:\"   Quantity \"}),/*#__PURE__*/_jsx(\"div\",{style:{paddingLeft:\"110px\"},children:\"  Subtotal\"})]})]}):/*#__PURE__*/_jsx(\"p\",{})]}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[localStorage.getItem(\"cart\")?localStorage.getItem(\"cart\")&&JSON.parse(localStorage.getItem(\"cart\")).map(function(dish){return/*#__PURE__*/_jsxs(Grid,{container:true,item:true,children:[/*#__PURE__*/_jsx(Grid,{container:true,xs:4,children:dish.dname}),/*#__PURE__*/_jsx(Grid,{container:true,xs:4,children:dish.quantity}),/*#__PURE__*/_jsxs(Grid,{container:true,xs:4,children:[\"$\",dish.subtotal]})]});}):/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",color:\"text.secondary\",component:\"div\",style:{paddingBottom:'25px'},children:\" Cart is empty \"}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\",pl:1,pb:1},children:[/*#__PURE__*/_jsx(\"br\",{}),localStorage.getItem(\"cart\")?/*#__PURE__*/_jsx(Link,{to:\"/checkout\",style:{paddingTop:'40px'},children:/*#__PURE__*/_jsxs(Button,{onClick:function onClick(){toggle();},style:{color:'white',backgroundColor:'black',display:'flex'},children:[\"GO TO CHECKOUT . $\",cartorder.total]})}):/*#__PURE__*/_jsx(Button,{disabled:true,onClick:function onClick(){toggle();},style:{color:'white',backgroundColor:'black',display:'flex'},children:\"ADD ITEMS\"})]})]})})]}),document.body):null;};var _useModal=useModal(),isShowing=_useModal.isShowing,toggle=_useModal.toggle;// const Item = styled(Paper)(({ theme }) => ({\n//   ...theme.typography.body2,\n//   padding: theme.spacing(2),\n//   textAlign: \"center\",\n//   color: theme.palette.text.secondary,\n// }));\nuseEffect(function(){console.log(restaurantId);getRestaurant();getDishes();},[]);var getRestaurant=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post(\"http://localhost:8081/restaurant/profile/\".concat(restaurantId),{}).then(function(responseData){console.log(\"res\",responseData);if(responseData.data.error){console.log(\"res\",responseData);// M.toast({ html: responseData.data.error, classes: \"#c62828 red darken-3\" })\n}else{//setcustomerData(responseData.data)\nsetRestaurant(responseData.data);console.log(\"restaurant\",responseData.data);//console.log(\"resss \",customerData);\n//localStorage.setItem(\"restaurant\", JSON.stringify(responseData.data));\n}});case 2:case\"end\":return _context.stop();}}},_callee);}));return function getRestaurant(){return _ref2.apply(this,arguments);};}();var getDishes=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post(\"http://localhost:8081/restaurant/getdish/\".concat(restaurantId),{}).then(function(responseData){console.log(\"res\",responseData);if(responseData.data.error){console.log(\"res\",responseData);// M.toast({ html: responseData.data.error, classes: \"#c62828 red darken-3\" })\n}else{//setcustomerData(responseData.data)\nsetDishes(responseData.data);console.log(\" dishes\",responseData.data);//console.log(\"resss \",customerData);\n//localStorage.setItem('dish', JSON.stringify(responseData.data));\n}});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function getDishes(){return _ref3.apply(this,arguments);};}();function signout(){dispatch(logout());localStorage.setItem(\"customer\",null);history.push(\"/\");}return restaurant?/*#__PURE__*/_jsxs(\"div\",{style:{padding:20},children:[/*#__PURE__*/_jsx(\"div\",{className:\"header__upper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header__upperheader\",style:{backgroundColor:headbg,boxShadow:shadow},children:[/*#__PURE__*/_jsx(\"div\",{className:\"header__upperheaderleft\",children:/*#__PURE__*/_jsxs(Link,{to:\"/chome\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://d3i4yxtzktqr9n.cloudfront.net/web-eats-v2/ee037401cb5d31b23cf780808ee4ec1f.svg \",alt:\"uber eats\"}),\" \"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"header__upperheadercenter\",children:[/*#__PURE__*/_jsx(LocationOn,{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"What are you craving? \"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"header__upperheaderright\",onClick:toggle,children:[/*#__PURE__*/_jsxs(\"p\",{children:[\" \",/*#__PURE__*/_jsx(ShoppingCartOutlinedIcon,{style:{color:\"black\"}}),/*#__PURE__*/_jsxs(\"span\",{className:\"empty-message\",children:[\" \",localStorage.getItem(\"cart\")?JSON.parse(localStorage.getItem(\"cart\")).length:\"Your cart is empty\"]}),\" \"]}),/*#__PURE__*/_jsx(Modal,{isShowing:isShowing,hide:toggle,style:{position:\"absolute\",width:\"240px\",height:\"340px\"}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"header__upperheaderright\",onClick:signout,children:/*#__PURE__*/_jsx(\"p\",{children:\" Sign out \"})})]})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Restaurantpic,{imgKey:restaurant.profilepic,name:restaurant.rname,desc:restaurant.rdesc,from:restaurant.fromTime,to:restaurant.toTime})}),/*#__PURE__*/_jsx(\"div\",{className:\"dish_home\",children:/*#__PURE__*/_jsx(Box,{sx:{flexGrow:1},children:/*#__PURE__*/_jsx(Grid,{container:true,spacing:5,children:dishes.map(function(dish){return/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(Dish,{id:dish.dishId,dname:dish.dname,des:dish.ddesc,ing:dish.ingredients,price:dish.Price,imageKey:dish.profilepic,restaurantId:restaurantId,rname:restaurant.rname})},dish.dishId);})})})})]}):/*#__PURE__*/_jsx(\"h1\",{});}export default Resprofile;","map":{"version":3,"sources":["/Users/gunjalgupta/Desktop/ubereatss/frontend/src/restaurant/Resprofile.js"],"names":["React","useEffect","useState","Restaurantpic","BrowserRouter","Router","useParams","useHistory","ShoppingCartOutlinedIcon","ReactDOM","axios","Link","M","Typography","Dish","Menu","LocationOn","WatchLater","ArrowDownward","Showprofile","Modal","Button","Box","Paper","experimentalStyled","styled","Grid","bcrypt","useDispatch","logout","_","require","Resprofile","history","dispatch","restaurant","setRestaurant","dishes","setDishes","JSON","parse","localStorage","getItem","cart","setCart","headbg","setheadbg","shadow","setshadow","inputdisplay","setinputdisplay","customerId","restaurantId","custId","String","invoiceId","hashSync","window","addEventListener","scrollY","cartorder","Number","total","sumBy","dish","subtotal","setItem","stringify","useModal","isShowing","setIsShowing","toggle","hide","createPortal","display","alignItems","fontSize","rname","justifyContent","paddingBottom","flexDirection","paddingLeft","map","dname","quantity","pl","pb","paddingTop","color","backgroundColor","document","body","console","log","getRestaurant","getDishes","post","then","responseData","data","error","signout","push","padding","boxShadow","length","position","width","height","profilepic","rdesc","fromTime","toTime","flexGrow","dishId","ddesc","ingredients","Price"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Restaurantpic from \"../components/Restaurantpic\";\nimport {\n  BrowserRouter as Router,\n  useParams,\n  useHistory,\n} from \"react-router-dom\";\nimport ShoppingCartOutlinedIcon from \"@mui/icons-material/ShoppingCartOutlined\";\nimport ReactDOM from \"react-dom\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport M from \"materialize-css\";\nimport Typography from \"@mui/material/Typography\";\nimport Dish from \"../components/Dishes\";\nimport {\n  Menu,\n  LocationOn,\n  WatchLater,\n  ArrowDownward,\n} from \"@mui/icons-material\";\nimport Showprofile from \"./Showprofile\";\nimport \"./Resprofile.css\";\nimport Modal from \"@mui/material/Modal\";\nimport Button from \"@mui/material/Button\";\nimport Box from \"@mui/material/Box\";\nimport Paper from \"@mui/material/Paper\";\nimport { experimentalStyled as styled } from \"@mui/material/styles\";\nimport Grid from \"@mui/material/Grid\";\nimport bcrypt from 'bcryptjs';\nimport { useDispatch } from \"react-redux\";\nimport { logout } from \"../actions/userActions\";\nvar _ = require('lodash');\n\nfunction Resprofile() {\n\n  const history = useHistory();\n  const dispatch= useDispatch();\n  const [restaurant, setRestaurant] = useState([]);\n  const [dishes, setDishes] = useState([]);\n  const [cart, setCart] = useState([JSON.parse(localStorage.getItem(\"cart\"))]);\n  const [headbg, setheadbg] = useState(\"transparent\");\n  const [shadow, setshadow] = useState(\"none\");\n  const [inputdisplay, setinputdisplay] = useState(0);\n  const customerId =  JSON.parse(localStorage.getItem(\"customer\")).customerId;\n  const { restaurantId } = useParams();\n  const custId = String(JSON.parse(localStorage.getItem(\"customer\")).customerId)\n  let invoiceId = bcrypt.hashSync(custId,10);\n\n  window.addEventListener(\"scroll\", () => {\n    if (window.scrollY >= 50) {\n      setheadbg(\"#FFFFFF\");\n      setshadow(\"rgb(226 226 226) 0px -2px 0px inset\");\n      setinputdisplay(1);\n    } else {\n      setheadbg(\"transparent\");\n      setshadow(\"none\");\n      setinputdisplay(0);\n    }\n  });\n\n\n  const cartorder={\n    customerId,\n    restaurantId: Number(restaurantId),\n    total : _.sumBy(JSON.parse(localStorage.getItem(\"cart\")), (dish) => dish.subtotal),\n    invoiceId,\n    dishes: JSON.parse(localStorage.getItem(\"cart\")) ? JSON.parse(localStorage.getItem(\"cart\")) : []\n  }\n\n  localStorage.setItem('order',JSON.stringify(cartorder))\n\n  const useModal = () => {\n    const [isShowing, setIsShowing] = useState(false);\n\n    function toggle() {\n      setIsShowing(!isShowing);\n    }\n\n    return {\n      isShowing,\n      toggle,\n    };\n  };\n\n  const Modal = ({ isShowing, hide }) =>\n    isShowing\n      ? ReactDOM.createPortal(\n          <React.Fragment>\n            <div className=\"modal-overlay\" />\n            <div\n              className=\"modal-wrapper\"\n              aria-modal\n              aria-hidden\n              tabIndex={-1}\n              role=\"dialog\"\n            >\n              <div className=\"modal\">\n                <div style={{ display: \"flex\", alignItems: \"center\",fontSize:30}}>  {JSON.parse(localStorage.getItem(\"cart\"))? JSON.parse(localStorage.getItem(\"cart\"))[0].rname:<p></p>}</div>\n                <div className=\"modal-header\" style={{justifyContent: 'flex-end'}}>\n                  <button\n                    type=\"button\"\n                    className=\"modal-close-button\"\n                    data-dismiss=\"modal\"\n                    aria-label=\"Close\"\n                    onClick={hide}\n                  >\n                    <span aria-hidden=\"true\">&times;</span>\n                  </button>\n                </div>\n                <Typography component=\"div\" variant=\"h5\"></Typography>\n                <Typography\n                  variant=\"subtitle1\"\n                  color=\"text.secondary\"\n                  component=\"div\"\n                  style={{paddingBottom: '25px'}}\n                >\n                  <br />\n                  {localStorage.getItem(\"cart\")? \n                  <div >Cart Items\n                  <div style={{display :\"flex\", flexDirection:\"row\"}}> \n                  <div>Dish name  </div> <div style={{paddingLeft:\"85px\"}}>   Quantity </div><div style={{paddingLeft:\"110px\"}}>  Subtotal</div></div></div>\n                  :<p></p>}\n                </Typography>\n\n                 <Grid container spacing={3}>\n                  {localStorage.getItem(\"cart\")?\n                    localStorage.getItem(\"cart\") && JSON.parse(localStorage.getItem(\"cart\")).map((dish) => (\n                      <Grid container item>\n                        <Grid container xs={4}>\n                          {dish.dname}\n                        </Grid>\n                        <Grid container xs={4}>\n                          {dish.quantity}\n                        </Grid>\n                        <Grid container xs={4}>\n                          ${dish.subtotal}\n                        </Grid>\n                      </Grid>\n                    )):<Typography\n                    variant=\"subtitle1\"\n                    color=\"text.secondary\"\n                    component=\"div\"\n                    style={{paddingBottom: '25px'}}\n                  > Cart is empty </Typography>}\n                 <br></br>\n                </Grid>\n                <Box\n                  sx={{ display: \"flex\", alignItems: \"center\", pl: 1, pb: 1 }}\n                >\n                  <br></br>\n                  {localStorage.getItem(\"cart\")? <Link to ='/checkout'style={{paddingTop: '40px'}}>\n                  \n                  <Button\n                    onClick={() => {\n                      toggle();\n                    }}\n                    style={{color:'white', backgroundColor:'black', display:'flex',}}\n                  >\n                    GO TO CHECKOUT . ${cartorder.total}\n                  </Button></Link> : <Button disabled\n                    onClick={() => {\n                      toggle();\n                    }}\n                    style={{color:'white', backgroundColor:'black', display:'flex',}}\n                  >\n                    ADD ITEMS \n                  </Button>}\n                  \n                </Box>\n              </div>\n            </div>\n          </React.Fragment>,\n          document.body\n        )\n      : null;\n  const { isShowing, toggle } = useModal();\n\n  // const Item = styled(Paper)(({ theme }) => ({\n  //   ...theme.typography.body2,\n  //   padding: theme.spacing(2),\n  //   textAlign: \"center\",\n  //   color: theme.palette.text.secondary,\n  // }));\n\n\n\n  useEffect(() => {\n    console.log(restaurantId);\n    getRestaurant();\n    getDishes();\n  }, []);\n\n  const getRestaurant = async () => {\n    //const customerId =  JSON.parse(localStorage.getItem(\"customer\")).customerId;\n\n    await axios\n      .post(`http://localhost:8081/restaurant/profile/${restaurantId}`, {})\n      .then((responseData) => {\n        console.log(\"res\", responseData);\n        if (responseData.data.error) {\n          console.log(\"res\", responseData);\n          // M.toast({ html: responseData.data.error, classes: \"#c62828 red darken-3\" })\n        } else {\n          //setcustomerData(responseData.data)\n          setRestaurant(responseData.data);\n          console.log(\"restaurant\", responseData.data);\n          //console.log(\"resss \",customerData);\n          //localStorage.setItem(\"restaurant\", JSON.stringify(responseData.data));\n        }\n      });\n  };\n\n  const getDishes = async () => {\n    \n\n    await axios\n      .post(`http://localhost:8081/restaurant/getdish/${restaurantId}`, {})\n      .then((responseData) => {\n        console.log(\"res\", responseData);\n        if (responseData.data.error) {\n          console.log(\"res\", responseData);\n          // M.toast({ html: responseData.data.error, classes: \"#c62828 red darken-3\" })\n        } else {\n          //setcustomerData(responseData.data)\n          setDishes(responseData.data);\n          console.log(\" dishes\", responseData.data);\n\n          //console.log(\"resss \",customerData);\n          //localStorage.setItem('dish', JSON.stringify(responseData.data));\n        }\n      });\n  };\n\n    \n  function signout(){\n    dispatch(logout());\n    localStorage.setItem(\"customer\",null);\n    history.push(\"/\")\n  }\n\n  return restaurant ? (\n    <div style={{padding:20}}>\n      <div className=\"header__upper\">\n        <div\n          className=\"header__upperheader\"\n          style={{ backgroundColor: headbg, boxShadow: shadow }}\n        >\n          <div className=\"header__upperheaderleft\">\n            \n            <Link to=\"/chome\">\n              <img\n                src=\"https://d3i4yxtzktqr9n.cloudfront.net/web-eats-v2/ee037401cb5d31b23cf780808ee4ec1f.svg \"\n                alt=\"uber eats\"\n              />{\" \"}\n            </Link>\n          </div>\n          <div className=\"header__upperheadercenter\"   >\n               <LocationOn />\n               <input type=\"text\" placeholder=\"What are you craving? \" />\n            </div>\n          <div className=\"header__upperheaderright\" onClick={toggle}>\n            <p>\n              {\" \"}\n              <ShoppingCartOutlinedIcon style={{ color: \"black\" }} />\n              <span className=\"empty-message\">\n                {\" \"}\n                {localStorage.getItem(\"cart\")\n                  ? JSON.parse(localStorage.getItem(\"cart\")).length\n                  : \"Your cart is empty\"}\n              </span>{\" \"}\n            </p>\n            <Modal\n              isShowing={isShowing}\n              hide={toggle}\n              style={{ position: \"absolute\", width: \"240px\", height: \"340px\" }}\n            />\n          </div>\n\n          <div className=\"header__upperheaderright\" onClick={signout}>\n            <p> Sign out </p>\n          </div>\n        </div>\n      </div>\n      <br />\n      <br />\n      <br />\n      <br />\n\n      <div>\n        <Restaurantpic imgKey={restaurant.profilepic} name={restaurant.rname} desc={restaurant.rdesc} from={restaurant.fromTime} to={restaurant.toTime}/>\n      </div>\n\n      <div className=\"dish_home\">\n        <Box sx={{ flexGrow: 1 }}>\n          <Grid container spacing={5}>\n            {dishes.map((dish) => (\n              <Grid item xs={6} key={dish.dishId}>\n                <Dish\n                  id={dish.dishId}\n                  dname={dish.dname}\n                  des={dish.ddesc}\n                  ing={dish.ingredients}\n                  price={dish.Price}\n                  imageKey={dish.profilepic}\n                  restaurantId= {restaurantId}\n                  rname={restaurant.rname}\n                />\n              </Grid>\n            ))}\n          </Grid>\n        </Box>\n      </div>\n    </div>\n  ) : (\n    <h1></h1>\n  );\n}\n\nexport default Resprofile;\n"]},"metadata":{},"sourceType":"module"}